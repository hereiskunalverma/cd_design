!function(e){function t(t){for(var r,a,s=t[0],u=t[1],l=t[2],f=0,h=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);h.length;)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={0:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;o.push([0,1]),n()}({0:function(e,t,n){e.exports=n("0aaL")},"0aaL":function(e,t,n){"use strict";n.r(t);n("Sm8t");var r=n("YH1O"),i=n.n(r),o=n("O2cr"),a=n("WrwZ"),s=n("d9k1"),u=n.n(s),l=n("t36m"),c=n("ScBi"),f=n("Rvax"),h=n("cuco"),p=n("XaR8");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,y(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){this.el=this.wrap.lastElementChild;var e=a.a.page,t=a.a.dom;e.last=e.current,e.current=this.el.dataset.routerView,e.last&&t.body.classList.remove("is-".concat(e.last)),e.current&&t.body.classList.add("is-".concat(e.current)),l.d.resetBrandColor()}},{key:"onLeave",value:function(){l.n.clean(),l.c.clean()}},{key:"onEnterCompleted",value:function(){var e=this;this.handleSmoothScroll(),this.initSignup(),"complete"===document.readyState?(c.d.setScrollBounds(),this.initParallax(),this.initPlanes(),this.toggleBird(),l.n.update(this.el)):Object(f.e)(window,"a","load",(function(){c.d.setScrollBounds(),l.o.resize(),e.initParallax(),e.initPlanes(),e.toggleBird(),l.n.update(e.el)})),u.a.initial?l.c.update(this.el):u.a.initial=!0}},{key:"onLeaveCompleted",value:function(){c.b.reset(),this.parallax&&this.parallax.destroy(),this.signup&&this.signup.destroy(),this.newsHovers&&this.newsHovers.destroy()}},{key:"handleSmoothScroll",value:function(){if(a.a.flags.smooth){var e=this.el.dataset.preload,t=Object(f.h)("[data-smooth-item]");!u.a.initial&&t?l.o.init(t,e):t?l.o.update(t,e):l.o.clean(),"#jobs"===window.location.hash&&c.b.scrollTo(Object(f.g)(window.location.hash).getBoundingClientRect().y-150)}}},{key:"initParallax",value:function(){var e=Object(f.h)("[data-from]");e&&(this.parallax=new l.k(e))}},{key:"initSignup",value:function(){var e=Object(f.g)(".js-signup",this.el);e&&(this.signup=new l.i(e))}},{key:"initPlanes",value:function(){if(a.a.flags.smooth){var e=Object(f.h)("[data-gl-id]",this.el);if(e)for(var t=0;t<e.length;t++)h.a.fromDom(e[t])}}},{key:"toggleBird",value:function(){var e=a.a.page.current;"home"===e||"about"===e||"contact"===e?p.a.switchBird(!0):p.a.switchBird(!1)}}])&&v(n.prototype,r),i&&v(n,i),t}(u.a.Renderer);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,O(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){E(O(t.prototype),"onEnter",this).call(this),p.a.goToView(0)}},{key:"onLeave",value:function(){E(O(t.prototype),"onLeave",this).call(this)}},{key:"onEnterCompleted",value:function(){var e=this;E(O(t.prototype),"onEnterCompleted",this).call(this),"complete"===document.readyState?(this.initInstaFeed(),this.initMobileApproach()):window.onload=function(){e.initInstaFeed(),e.initMobileApproach()}}},{key:"onLeaveCompleted",value:function(){E(O(t.prototype),"onLeaveCompleted",this).call(this),this.instaSlider&&this.instaSlider.destroy(),this.approachSlider&&this.approachSlider.destroy()}},{key:"initInstaFeed",value:function(){var e=Object(f.g)(".js-insta-slider");e&&(this.instaSlider=new l.g(e,{speed:2,ease:.07}))}},{key:"initMobileApproach",value:function(){if(a.a.isDevice){var e=Object(f.g)(".js-approach-slider");e&&(this.approachSlider=new l.b(e,{speed:2,ease:.07,snap:!0}))}}}])&&w(n.prototype,r),i&&w(n,i),t}(b);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,j(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){_(j(t.prototype),"onEnter",this).call(this)}},{key:"onLeave",value:function(){_(j(t.prototype),"onLeave",this).call(this)}},{key:"onEnterCompleted",value:function(){var e=this;_(j(t.prototype),"onEnterCompleted",this).call(this),"complete"===document.readyState?this.projectList=new l.m:Object(f.e)(window,"a","load",(function(){e.projectList=new l.m}))}},{key:"onLeaveCompleted",value:function(){_(j(t.prototype),"onLeaveCompleted",this).call(this),this.projectList.destroy()}}])&&F(n.prototype,r),i&&F(n,i),t}(b);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,I(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){B(I(t.prototype),"onEnter",this).call(this)}},{key:"onLeave",value:function(){B(I(t.prototype),"onLeave",this).call(this)}},{key:"onEnterCompleted",value:function(){var e=this;B(I(t.prototype),"onEnterCompleted",this).call(this),"complete"===document.readyState?this.initSliders():Object(f.e)(window,"a","load",(function(){e.initSliders()}))}},{key:"onLeaveCompleted",value:function(){B(I(t.prototype),"onLeaveCompleted",this).call(this)}},{key:"initSliders",value:function(){var e=Object(f.h)(".js-img-slider");if(e){this.sliders=[];for(var t=0;t<e.length;t++)this.sliders.push(new l.f(e[t],{snap:!0}))}}}])&&M(n.prototype,r),i&&M(n,i),t}(b);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e,t,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,X(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){H(X(t.prototype),"onEnter",this).call(this),p.a.goToView(0)}},{key:"onLeave",value:function(){H(X(t.prototype),"onLeave",this).call(this)}},{key:"onEnterCompleted",value:function(){H(X(t.prototype),"onEnterCompleted",this).call(this),this.teamSlider=new l.p(Object(f.g)(".js-draggable")),this.offices=new l.f(Object(f.g)(".js-img-slider"),{snap:!0})}},{key:"onLeaveCompleted",value:function(){H(X(t.prototype),"onLeaveCompleted",this).call(this),this.teamSlider.destroy()}}])&&N(n.prototype,r),i&&N(n,i),t}(b);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function t(){var e,n,r,i,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),h=0;h<u;h++)l[h]=arguments[h];return n=function(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?Z(e):t}(this,(e=Q(t)).call.apply(e,[this].concat(l))),r=Z(n),s=function(){var e=Object(f.g)(".js-jobs");o.a.to(c.b,{target:e.getBoundingClientRect().top-.25*a.a.bounds.wh,duration:1,ease:"expo.inOut"})},(i="jobsAnchor")in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){J(Q(t.prototype),"onEnter",this).call(this),p.a.goToView(1)}},{key:"onLeave",value:function(){J(Q(t.prototype),"onLeave",this).call(this),c.a.off("click",".js-jobs-anchor",this.jobsAnchor)}},{key:"onEnterCompleted",value:function(){J(Q(t.prototype),"onEnterCompleted",this).call(this),this.officeToggle=new l.j,c.a.on("click",".js-jobs-anchor",this.jobsAnchor)}},{key:"onLeaveCompleted",value:function(){J(Q(t.prototype),"onLeaveCompleted",this).call(this),this.officeToggle&&this.officeToggle.destroy()}}])&&W(n.prototype,r),i&&W(n,i),t}(b);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e,t,n){return(ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,oe(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){ie(oe(t.prototype),"onEnter",this).call(this),p.a.switchAmbient(!1)}},{key:"onLeave",value:function(){ie(oe(t.prototype),"onLeave",this).call(this),p.a.switchAmbient(!0)}},{key:"onEnterCompleted",value:function(){ie(oe(t.prototype),"onEnterCompleted",this).call(this),this.press=new l.l}},{key:"onLeaveCompleted",value:function(){ie(oe(t.prototype),"onLeaveCompleted",this).call(this),this.press.destroy()}}])&&ne(n.prototype,r),i&&ne(n,i),t}(b);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e,t,n){return(fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ce(this,he(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"onEnter",value:function(){fe(he(t.prototype),"onEnter",this).call(this),p.a.switchAmbient(!1)}},{key:"onLeave",value:function(){fe(he(t.prototype),"onLeave",this).call(this),p.a.switchAmbient(!0)}},{key:"onEnterCompleted",value:function(){fe(he(t.prototype),"onEnterCompleted",this).call(this)}},{key:"onLeaveCompleted",value:function(){fe(he(t.prototype),"onLeaveCompleted",this).call(this)}}])&&le(n.prototype,r),i&&le(n,i),t}(b),ve=n("JG10");function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=null,xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,be(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,e),n=t,(r=[{key:"in",value:function(e){var t=e.from,n=e.to,r=e.done,i=Object(f.g)(".js-t-preload",n);we&&we.kill(),we=o.a.timeline({paused:!0}).fromTo(n,{alpha:0},{alpha:1,duration:.4,ease:"power1"}),Object(ve.a)(we,n),i?Object(f.f)(i).then((function(){we.play(),a.a.dom.body.style.cursor="default",a.a.flags.locked=!1})):(we.play(),a.a.dom.body.style.cursor="default",a.a.flags.locked=!1),t.remove(),r()}},{key:"out",value:function(e){var t=e.from,n=e.done;a.a.dom.body.style.cursor="progress",a.a.flags.locked=!0,t.dataset.pid&&h.a.removePlanes(t.dataset.pid,!0),o.a.to(t,{duration:.5,alpha:0,ease:"power1",onComplete:function(){return n()}})}}])&&ye(n.prototype,r),i&&ye(n,i),t}(u.a.Transition),Ee=n("6wCR"),Oe=n.n(Ee),Se=n("O0I/");function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=null,ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fe(this,Te(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,e),n=t,(r=[{key:"in",value:function(e){var t=e.from,n=e.to,r=e.done,i=Object(f.g)(".js-t-preload",n),s=Object(f.h)(".js-t-chars",n),u=Object(f.h)(".js-t-lines",n),l=Object(f.h)(".js-t-up",n),c=Object(f.h)(".js-t-words",n);if(je&&je.kill(),je=o.a.timeline({paused:!0,delay:.5}).set(n,{alpha:1}),s.length>0)for(var h=0;h<s.length;h++){var p=new Oe.a(s[h],{type:"words, chars",charsClass:"char"});je.fromTo(p.chars,{yPercent:75,rotationX:75,alpha:0},{yPercent:0,rotationX:0,alpha:1,stagger:.05,duration:2,ease:"expo"},0)}if(c.length>0)for(var d=0;d<c.length;d++){var v=new Oe.a(c[d],{type:"words",wordsClass:"word"});je.fromTo(v.words,{yPercent:75,rotationX:75,alpha:0},{yPercent:0,rotationX:0,alpha:1,stagger:.1,duration:2,ease:"expo"},"0.".concat(d))}if(u.length>0)for(var m=0;m<u.length;m++){var y=new Oe.a(u[m],{type:"lines",charsClass:"line"});je.fromTo(y.lines,{y:"3rem",alpha:0},{y:0,alpha:1,stagger:.1,duration:2,ease:"expo"},.55)}l.length>0&&je.fromTo(l,{y:"3rem",alpha:0},{y:0,alpha:1,stagger:.1,duration:2,ease:"expo"},.65),i?Object(f.f)(i).then((function(){Se.a.close(),je.play(),a.a.dom.body.style.cursor="default",a.a.flags.locked=!1,a.a.flags.dropdown=!1})):(Se.a.close(),je.play(),a.a.dom.body.style.cursor="default",a.a.flags.locked=!1,a.a.flags.dropdown=!1),t.remove(),r()}},{key:"out",value:function(e){var t=e.from,n=e.done;a.a.dom.body.style.cursor="progress",a.a.flags.locked=!0,t.dataset.pid&&h.a.removePlanes(t.dataset.pid,!1),n()}}])&&Pe(n.prototype,r),i&&Pe(n,i),t}(u.a.Transition);u.a.initial=!1;var Ae=new u.a.Core({renderers:{home:C,projects:A,project:U,about:q,contact:ee,press:se,newsSingle:de,default:b},transitions:{default:xe,contextual:{menu:ke}}});function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){a.a.flags.locked=!1},(n="onLoad")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.setup(),this.init()}var t,n,r;return t=e,(n=[{key:"setup",value:function(){var e=this;i.a.addClasses(a.a.dom.body),a.a.flags.windows&&a.a.dom.body.classList.add("is-windows"),p.a.needsFallback&&a.a.dom.body.classList.add("is-no-gl"),o.a.set(".js-loader-circle",{drawSVG:0,opacity:1}),f.a.load({el:Object(f.g)(".js-t-preload")||a.a.dom.body,progress:!0}).then((function(){e.onLoad()}))}},{key:"init",value:function(){this.highwayEvents(),this.logoLink(),this.initAlmond(),l.e.init(),o.a.set("[data-router-view]",{alpha:1}),p.a.init(),!a.a.isDevice&&p.a.scene.add(h.a.planesGroup)}},{key:"highwayEvents",value:function(){Ae.on("NAVIGATE_OUT",(function(){Object(f.h)(".js-site-link").forEach((function(e){e.classList.remove("is-active"),e.href===location.href&&e.classList.add("is-active")}))})),Ae.on("NAVIGATE_IN",(function(){window.scrollTo(0,0)}))}},{key:"logoLink",value:function(){c.a.delegate("click",".js-logo",(function(e){e.preventDefault(),a.a.flags.dropdown?Ae.redirect(location.origin,"menu"):Ae.redirect(location.origin)}))}},{key:"initAlmond",value:function(){new l.a}}])&&Re(t.prototype,n),r&&Re(t,r),e}())},"2O49":function(e,t,n){"use strict";(function(e){var r=n("O2cr"),i=n("XaR8"),o=n("WrwZ"),a=n("Rvax"),s=n("ScBi");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=[{position:new e.Vector3,rotation:new e.Vector3},{position:new e.Vector3(-15,0,0),rotation:new e.Vector3(0,Math.PI/4,0)},{position:new e.Vector3(15,0,0),rotation:new e.Vector3(0,-Math.PI/4,0)}];t.a=new(function(){function e(){var t,n,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){var t=e.current;if(a.tl){var n=r.a.utils.clamp(0,1,t/a.bottom);a.tl.progress(n),t>a.bp&&i.a.getBirdState()?i.a.switchBird(!1):t<=a.bp&&!i.a.getBirdState()&&i.a.switchBird(!0)}},(n="run")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,this.bottom=null,this.bp=null,this.stopEl=null,this.tl=null}var t,n,c;return t=e,(n=[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.a.dom.body;this.stopEl=Object(a.g)("[data-bird-stop",e),this.stopEl&&(!i.a.getBirdState()&&i.a.switchBird(!0),this.bottom=this.stopEl.getBoundingClientRect().bottom-o.a.bounds.wh,this.createTl(),this.addEvents())}},{key:"addEvents",value:function(){s.a.on("tick",this.run)}},{key:"createTl",value:function(){var e=l,t=o.a.page.current;this.tl&&this.tl.kill(),this.tl=r.a.timeline({paused:!0}),"home"===t?(this.bp=this.bottom+o.a.bounds.wh/2,this.tl.to(i.a.bird.position,{duration:1,x:e[1].position.x,ease:"power1.out"}).to(i.a.bird.rotation,{duration:1,y:e[1].rotation.y,ease:"power1.out"},0).to(i.a.bird.position,{duration:1,x:e[2].position.x,ease:"power1.inOut"},1).to(i.a.bird.rotation,{duration:1,y:e[2].rotation.y,ease:"power1.inOut"},1)):"about"===t?(this.bottom+=o.a.bounds.wh/2,this.bp=this.bottom,this.tl.to(i.a.bird.position,{duration:1,x:e[1].position.x,ease:"power1.inOut"}).to(i.a.bird.rotation,{duration:1,y:e[1].rotation.y,ease:"power1.inOut"},0)):"contact"===t&&(this.bp=this.bottom-o.a.bounds.wh/2,this.tl.to(i.a.bird.position,{duration:1,x:e[0].position.x,ease:"power1.inOut"}).to(i.a.bird.rotation,{duration:1,y:e[0].rotation.y,ease:"power1.inOut"},0))}},{key:"removeEvents",value:function(){s.a.off("tick",this.run)}},{key:"clean",value:function(){this.tl&&(this.removeEvents(),this.tl.kill(),this.bottom=this.stopEl=null)}}])&&u(t.prototype,n),c&&u(t,c),e}())}).call(this,n("i8eK"))},"3jgs":function(e,t,n){var r,i,o,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e){"use strict";
/*!
   * DrawSVGPlugin 3.0.0
   * https://greensock.com
   *
   * @license Copyright 2008-2019, GreenSock. All rights reserved.
   * Subject to the terms at https://greensock.com/standard-license or for
   * Club GreenSock members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */var t,n,r,i,o,a=function(){return"undefined"!=typeof window},s=function(){return t||a()&&(t=window.gsap)&&t.registerPlugin&&t},u=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,l={rect:["width","height"],circle:["r","r"],ellipse:["rx","ry"],line:["x2","y2"]},c=function(e){return Math.round(1e4*e)/1e4},f=function(e){return parseFloat(e||0)},h=function(e,t){return f(e.getAttribute(t))},p=Math.sqrt,d=function(e,t,n,r,i,o){return p(Math.pow((f(n)-f(e))*i,2)+Math.pow((f(r)-f(t))*o,2))},v=function(e){return console.warn(e)},m=function(e){return"non-scaling-stroke"===e.getAttribute("vector-effect")},y=function(e){if(!(e=n(e)[0]))return 0;var t,r,i,o,a,s,c,f=e.tagName.toLowerCase(),y=e.style,g=1,b=1;m(e)&&(b=e.getScreenCTM(),g=p(b.a*b.a+b.b*b.b),b=p(b.d*b.d+b.c*b.c));try{r=e.getBBox()}catch(e){v("Some browsers won't measure invisible elements (like display:none or masks inside defs).")}var D=r||{x:0,y:0,width:0,height:0},w=D.x,x=D.y,E=D.width,O=D.height;if(r&&(E||O)||!l[f]||(E=h(e,l[f][0]),O=h(e,l[f][1]),"rect"!==f&&"line"!==f&&(E*=2,O*=2),"line"===f&&(w=h(e,"x1"),x=h(e,"y1"),E=Math.abs(E-w),O=Math.abs(O-x))),"path"===f)o=y.strokeDasharray,y.strokeDasharray="none",t=e.getTotalLength()||0,g!==b&&v("Warning: <path> length cannot be measured when vector-effect is non-scaling-stroke and the element isn't proportionally scaled."),t*=(g+b)/2,y.strokeDasharray=o;else if("rect"===f)t=2*E*g+2*O*b;else if("line"===f)t=d(w,x,w+E,x+O,g,b);else if("polyline"===f||"polygon"===f)for(i=e.getAttribute("points").match(u)||[],"polygon"===f&&i.push(i[0],i[1]),t=0,a=2;a<i.length;a+=2)t+=d(i[a-2],i[a-1],i[a],i[a+1],g,b)||0;else"circle"!==f&&"ellipse"!==f||(s=E/2*g,c=O/2*b,t=Math.PI*(3*(s+c)-p((3*s+c)*(s+3*c))));return t||0},g=function(e,t){if(!(e=n(e)[0]))return[0,0];t||(t=y(e)+1);var i=r.getComputedStyle(e),o=i.strokeDasharray||"",a=f(i.strokeDashoffset),s=o.indexOf(",");return s<0&&(s=o.indexOf(" ")),(o=s<0?t:f(o.substr(0,s))||1e-5)>t&&(o=t),[Math.max(0,-a),Math.max(0,o-a)]},b=function(){a()&&(r=window,o=t=s(),n=t.utils.toArray,i=-1!==((r.navigator||{}).userAgent||"").indexOf("Edge"))},D={version:"3.0.0",name:"drawSVG",register:function(e){t=e,b()},init:function(e,t,n,a,s){if(!e.getBBox)return!1;o||b();var u,l,h,p,d=y(e)+1;return this._style=e.style,this._target=e,t+""=="true"?t="0 100%":t?-1===(t+"").indexOf(" ")&&(t="0 "+t):t="0 0",l=function(e,t,n){var r,i,o=e.indexOf(" ");return o<0?(r=void 0!==n?n+"":e,i=e):(r=e.substr(0,o),i=e.substr(o+1)),(r=~r.indexOf("%")?f(r)/100*t:f(r))>(i=~i.indexOf("%")?f(i)/100*t:f(i))?[i,r]:[r,i]}(t,d,(u=g(e,d))[0]),this._length=c(d+10),0===u[0]&&0===l[0]?(h=Math.max(1e-5,l[1]-d),this._dash=c(d+h),this._offset=c(d-u[1]+h),this._offsetPT=this.add(this,"_offset",this._offset,c(d-l[1]+h))):(this._dash=c(u[1]-u[0])||1e-6,this._offset=c(-u[0]),this._dashPT=this.add(this,"_dash",this._dash,c(l[1]-l[0])||1e-5),this._offsetPT=this.add(this,"_offset",this._offset,c(-l[0]))),i&&(p=r.getComputedStyle(e)).strokeLinecap!==p.strokeLinejoin&&(l=f(p.strokeMiterlimit),this.add(e.style,"strokeMiterlimit",l,l+.01)),this._live=m(e)||~(t+"").indexOf("live"),this._props.push("drawSVG"),1},render:function(e,t){var n,r,i,o,a=t._pt,s=t._style;if(a){for(t._live&&(n=y(t._target)+11)!==t._length&&(r=n/t._length,t._length=n,t._offsetPT.s*=r,t._offsetPT.c*=r,t._dashPT?(t._dashPT.s*=r,t._dashPT.c*=r):t._dash*=r);a;)a.r(e,a.d),a=a._next;i=t._dash,o=t._offset,n=t._length,s.strokeDashoffset=t._offset,1!==e&&e?s.strokeDasharray=i+"px,"+n+"px":(i-o<.001&&n-i<=10&&(s.strokeDashoffset=o+1),s.strokeDasharray=o<.001&&n-i<=10?"none":o===i?"0px, 999999px":i+"px,"+n+"px")}},getLength:y,getPosition:g};s()&&t.registerPlugin(D),e.DrawSVGPlugin=D,e.default=D,Object.defineProperty(e,"__esModule",{value:!0})},"object"===s(t)&&void 0!==e?a(t):(i=[t],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},"6wCR":function(e,t,n){var r,i,o,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e){"use strict";var t,n,r,i=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/,o=/(?:\r|\n|\t\t)/g,a=/(?:\s\s+)/g,u=function(){t=document,n=window,r=1},l=function(e){return n.getComputedStyle(e)},c=Array.isArray,f=[].slice,h=function(e,n){var r;return c(e)?e:"string"===(r=s(e))&&!n&&e?f.call(t.querySelectorAll(e),0):e&&"object"===r&&"length"in e?f.call(e,0):e?[e]:[]},p=function(e){return"absolute"===e.position||!0===e.absolute},d=function(e,t){for(var n,r=t.length;--r>-1;)if(n=t[r],e.substr(0,n.length)===n)return n.length},v=function(e,t){void 0===e&&(e="");var n=~e.indexOf("++"),r=1;return n&&(e=e.split("++").join("")),function(){return"<"+t+" style='position:relative;display:inline-block;'"+(e?" class='"+e+(n?r++:"")+"'>":">")}},m=function e(t,n,r){var i=t.nodeType;if(1===i||9===i||11===i)for(t=t.firstChild;t;t=t.nextSibling)e(t,n,r);else 3!==i&&4!==i||(t.nodeValue=t.nodeValue.split(n).join(r))},y=function(e,t){for(var n=t.length;--n>-1;)e.push(t[n])},g=function(e,t,n){for(var r;e&&e!==t;){if(r=e._next||e.nextSibling)return r.textContent.charAt(0)===n;e=e.parentNode||e._parent}},b=function e(t){var n,r,i=h(t.childNodes),o=i.length;for(n=0;n<o;n++)(r=i[n])._isSplit?e(r):(n&&3===r.previousSibling.nodeType?r.previousSibling.nodeValue+=3===r.nodeType?r.nodeValue:r.firstChild.nodeValue:3!==r.nodeType&&t.insertBefore(r.firstChild,r),t.removeChild(r))},D=function(e,t){return parseFloat(t[e])||0},w=function(e,n,r,i,o,a,s){var u,c,f,h,d,v,w,x,E,O,S,C,P=l(e),F=D("paddingLeft",P),T=-999,_=D("borderBottomWidth",P)+D("borderTopWidth",P),j=D("borderLeftWidth",P)+D("borderRightWidth",P),k=D("paddingTop",P)+D("paddingBottom",P),A=D("paddingLeft",P)+D("paddingRight",P),R=.2*D("fontSize",P),M=P.textAlign,L=[],B=[],I=[],z=n.wordDelimiter||" ",U=n.tag?n.tag:n.span?"span":"div",G=n.type||n.split||"chars,words,lines",N=o&&~G.indexOf("lines")?[]:null,V=~G.indexOf("words"),H=~G.indexOf("chars"),X=p(n),Y=n.linesClass,q=~(Y||"").indexOf("++"),K=[];for(q&&(Y=Y.split("++").join("")),f=(c=e.getElementsByTagName("*")).length,d=[],u=0;u<f;u++)d[u]=c[u];if(N||X)for(u=0;u<f;u++)((v=(h=d[u]).parentNode===e)||X||H&&!V)&&(C=h.offsetTop,N&&v&&Math.abs(C-T)>R&&("BR"!==h.nodeName||0===u)&&(w=[],N.push(w),T=C),X&&(h._x=h.offsetLeft,h._y=C,h._w=h.offsetWidth,h._h=h.offsetHeight),N&&((h._isSplit&&v||!H&&v||V&&v||!V&&h.parentNode.parentNode===e&&!h.parentNode._isSplit)&&(w.push(h),h._x-=F,g(h,e,z)&&(h._wordEnd=!0)),"BR"===h.nodeName&&(h.nextSibling&&"BR"===h.nextSibling.nodeName||0===u)&&N.push([])));for(u=0;u<f;u++)v=(h=d[u]).parentNode===e,"BR"!==h.nodeName?(X&&(E=h.style,V||v||(h._x+=h.parentNode._x,h._y+=h.parentNode._y),E.left=h._x+"px",E.top=h._y+"px",E.position="absolute",E.display="block",E.width=h._w+1+"px",E.height=h._h+"px"),!V&&H?h._isSplit?(h._next=h.nextSibling,h.parentNode.appendChild(h)):h.parentNode._isSplit?(h._parent=h.parentNode,!h.previousSibling&&h.firstChild&&(h.firstChild._isFirst=!0),h.nextSibling&&" "===h.nextSibling.textContent&&!h.nextSibling.nextSibling&&K.push(h.nextSibling),h._next=h.nextSibling&&h.nextSibling._isFirst?null:h.nextSibling,h.parentNode.removeChild(h),d.splice(u--,1),f--):v||(C=!h.nextSibling&&g(h.parentNode,e,z),h.parentNode._parent&&h.parentNode._parent.appendChild(h),C&&h.parentNode.appendChild(t.createTextNode(" ")),"span"===U&&(h.style.display="inline"),L.push(h)):h.parentNode._isSplit&&!h._isSplit&&""!==h.innerHTML?B.push(h):H&&!h._isSplit&&("span"===U&&(h.style.display="inline"),L.push(h))):N||X?(h.parentNode&&h.parentNode.removeChild(h),d.splice(u--,1),f--):V||e.appendChild(h);for(u=K.length;--u>-1;)K[u].parentNode.removeChild(K[u]);if(N){for(X&&(O=t.createElement(U),e.appendChild(O),S=O.offsetWidth+"px",C=O.offsetParent===e?0:e.offsetLeft,e.removeChild(O)),E=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(x=" "===z&&(!X||!V&&!H),u=0;u<N.length;u++){for(w=N[u],(O=t.createElement(U)).style.cssText="display:block;text-align:"+M+";position:"+(X?"absolute;":"relative;"),Y&&(O.className=Y+(q?u+1:"")),I.push(O),f=w.length,c=0;c<f;c++)"BR"!==w[c].nodeName&&(h=w[c],O.appendChild(h),x&&h._wordEnd&&O.appendChild(t.createTextNode(" ")),X&&(0===c&&(O.style.top=h._y+"px",O.style.left=F+C+"px"),h.style.top="0px",C&&(h.style.left=h._x-C+"px")));0===f?O.innerHTML="&nbsp;":V||H||(b(O),m(O,String.fromCharCode(160)," ")),X&&(O.style.width=S,O.style.height=h._h+"px"),e.appendChild(O)}e.style.cssText=E}X&&(s>e.clientHeight&&(e.style.height=s-k+"px",e.clientHeight<s&&(e.style.height=s+_+"px")),a>e.clientWidth&&(e.style.width=a-A+"px",e.clientWidth<a&&(e.style.width=a+j+"px"))),y(r,L),V&&y(i,B),y(o,I)},x=function(e,n,r,s){var u,l,c,f,h,v,y,g,b=n.tag?n.tag:n.span?"span":"div",D=~(n.type||n.split||"chars,words,lines").indexOf("chars"),w=p(n),x=n.wordDelimiter||" ",E=" "!==x?"":w?"&#173; ":" ",O="</"+b+">",S=1,C=n.specialChars?"function"==typeof n.specialChars?n.specialChars:d:null,P=t.createElement("div"),F=e.parentNode;for(F.insertBefore(P,e),P.textContent=e.nodeValue,F.removeChild(e),y=-1!==(u=function e(t){var n=t.nodeType,r="";if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)r+=e(t)}else if(3===n||4===n)return t.nodeValue;return r}
/*!
   * SplitText: 3.0.0
   * https://greensock.com
   *
   * @license Copyright 2008-2019, GreenSock. All rights reserved.
   * Subject to the terms at https://greensock.com/standard-license or for
   * Club GreenSock members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */(e=P)).indexOf("<"),!1!==n.reduceWhiteSpace&&(u=u.replace(a," ").replace(o,"")),y&&(u=u.split("<").join("{{LT}}")),h=u.length,l=(" "===u.charAt(0)?E:"")+r(),c=0;c<h;c++)if(v=u.charAt(c),C&&(g=C(u.substr(c),n.specialChars)))v=u.substr(c,g||1),l+=D&&" "!==v?s()+v+"</"+b+">":v,c+=g-1;else if(v===x&&u.charAt(c-1)!==x&&c){for(l+=S?O:"",S=0;u.charAt(c+1)===x;)l+=E,c++;c===h-1?l+=E:")"!==u.charAt(c+1)&&(l+=E+r(),S=1)}else"{"===v&&"{{LT}}"===u.substr(c,6)?(l+=D?s()+"{{LT}}</"+b+">":"{{LT}}",c+=5):v.charCodeAt(0)>=55296&&v.charCodeAt(0)<=56319||u.charCodeAt(c+1)>=65024&&u.charCodeAt(c+1)<=65039?(f=((u.substr(c,12).split(i)||[])[1]||"").length||2,l+=D&&" "!==v?s()+u.substr(c,f)+"</"+b+">":u.substr(c,f),c+=f-1):l+=D&&" "!==v?s()+v+"</"+b+">":v;e.outerHTML=l+(S?O:""),y&&m(F,"{{LT}}","<")},E=function e(t,n,r,i){var o,a,s=h(t.childNodes),u=s.length,c=p(n);if(3!==t.nodeType||u>1){for(n.absolute=!1,o=0;o<u;o++)(3!==(a=s[o]).nodeType||/\S+/.test(a.nodeValue))&&(c&&3!==a.nodeType&&"inline"===l(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,e(a,n,r,i));return n.absolute=c,void(t._isSplit=!0)}x(t,n,r,i)},O=function(){function e(e,t){r||u(),this.elements=h(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)}var t=e.prototype;return t.split=function(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t,n,r,i=this.elements.length,o=e.tag?e.tag:e.span?"span":"div",a=v(e.wordsClass,o),s=v(e.charsClass,o);--i>-1;)r=this.elements[i],this._originals[i]=r.innerHTML,t=r.clientHeight,n=r.clientWidth,E(r,e,a,s),w(r,e,this.chars,this.words,this.lines,n,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},t.revert=function(){var e=this._originals;if(!e)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(t,n){return t.innerHTML=e[n]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},e.create=function(t,n){return new e(t,n)},e}();O.version="3.0.0",e.SplitText=O,e.default=O,Object.defineProperty(e,"__esModule",{value:!0})},"object"===s(t)&&void 0!==e?a(t):(i=[t],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},AQNj:function(e,t,n){"use strict";(function(e,t){var r,i=n("O2cr"),o=n("WrwZ");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function e(t,n,i){function o(s,u){if(!n[s]){if(!t[s]){if(!u&&("function"==typeof r&&r))return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return o(t[s][1][e]||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],2:[function(e,t,n){var r=new(n.MersenneTwister19937=function(){var e,t,n;e=624,t=2147483648,n=2147483647;var r=new Array(e),i=625;function o(e){return e<0?(e^t)+t:e}function a(e,t){return o(e+t&4294967295)}function s(e,t){for(var n=0,r=0;r<32;++r)e>>>r&1&&(n=a(n,o(t<<r)));return n}this.init_genrand=function(t){for(r[0]=o(4294967295&t),i=1;i<e;i++)r[i]=a(s(1812433253,o(r[i-1]^r[i-1]>>>30)),i),r[i]=o(4294967295&r[i])},this.init_by_array=function(t,n){var i,u,l,c,f;for(this.init_genrand(19650218),i=1,u=0,l=n<e?e:n;l;l--)r[i]=a(a(o(r[i]^s(o(r[i-1]^r[i-1]>>>30),1664525)),t[u]),u),r[i]=o(4294967295&r[i]),u++,e<=++i&&(r[0]=r[623],i=1),n<=u&&(u=0);for(l=623;l;l--)r[i]=(c=o((dbg=r[i])^s(o(r[i-1]^r[i-1]>>>30),1566083941)))<(f=i)?o(4294967296-(f-c)&4294967295):c-f,r[i]=o(4294967295&r[i]),e<=++i&&(r[0]=r[623],i=1);r[0]=2147483648};var u=[0,2567483615];this.genrand_int32=function(){var a;if(e<=i){var s;for(625==i&&this.init_genrand(5489),s=0;s<227;s++)a=o(r[s]&t|r[s+1]&n),r[s]=o(r[s+397]^a>>>1^u[1&a]);for(;s<623;s++)a=o(r[s]&t|r[s+1]&n),r[s]=o(r[s+-227]^a>>>1^u[1&a]);a=o(r[623]&t|r[0]&n),r[623]=o(r[396]^a>>>1^u[1&a]),i=0}return a=o((a=r[i++])^a>>>11),a=o(a^a<<7&2636928640),a=o(a^a<<15&4022730752),o(a^a>>>18)},this.genrand_int31=function(){return this.genrand_int32()>>>1},this.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},this.genrand_real2=function(){return this.genrand_int32()*(1/4294967296)},this.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},this.genrand_res53=function(){return 1/9007199254740992*(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))}});r.init_genrand((new Date).getTime()%1e9),n.rand=function(e){return e=e||32768,Math.floor(r.genrand_real2()*e)},n.seed=function(e){if("number"!=typeof e)throw new Error("seed(S) must take numeric argument; is "+a(e));r.init_genrand(e)},n.seed_array=function(e){if("object"!=a(e))throw new Error("seed_array(A) must take array of numbers; is "+a(e));r.init_by_array(e)}},{}],3:[function(t,n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=v(t("./io/AssetsManager")),s=v(t("./io/GLTFAsset")),u=v(t("../sys/Utils")),l=v(t("./gfx/utils/GLInfo")),c=v(t("../sys/Random")),f=v(t("./gfx/utils/GfxUtils")),h=v(t("./gfx/VFXRenderer")),p=v(t("./gfx/GPUParticleSim")),d=v(t("../ui/CameraController"));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=t("glslify"),g=u.default.isMobile()?128:256,b=[{position:new e.Vector3,rotation:new e.Vector3},{position:new e.Vector3(-10,0,0),rotation:new e.Vector3(0,Math.PI/4,0)},{position:new e.Vector3(10,0,0),rotation:new e.Vector3(0,-Math.PI/4,0)}],D=function(){function t(n){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{manualUpdate:!1,maxPR:1.5,glbPath:""},v=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("Initializing App..."),console.log("Powered by ThreeJS rev",e.REVISION),this.container=n,this.needsFallback=!1,!u.default.webgl())return console.log("Needs fallback"),void(this.needsFallback=!0);this.loaded=!1;var m=o.a.bounds.ww,b=o.a.bounds.wh;if(this.renderer=new e.WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.glInfo=new l.default(this.renderer.getContext()),this.mouseRepeller=new e.Vector4(0,0,0,0),this.sim=new p.default(this.glInfo,this.mouseRepeller),this.sim.enabled||u.default.isDesktop()){this.renderer.setClearColor(0,1),this.vfxRenderer=new h.default(this.renderer,this.glInfo,i.maxPR),this.vfxRenderer.setSize(m,b),n.appendChild(this.renderer.domElement),this.clock=new e.Clock,this.time=0,this.camera=new e.PerspectiveCamera(50,m/b,.01,1e3),this.scene=new e.Scene,this.scene.add(this.camera),this.world=new e.Group,this.scene.add(this.world),this.camera.position.z=50,this.controller=new d.default(this.camera),this.selectedView=0,this.renderer.render(this.scene,this.camera),this.manager=new a.default,this.manager.add(new s.default(i.glbPath||"assets/models/mesh.glb")),this.raycaster=new e.Raycaster,this.mouse=new e.Vector2,this.intersected={active:!1,point:new e.Vector3},this.intersectionPlane=new e.Mesh(new e.PlaneBufferGeometry(45,25,16,16),new e.MeshBasicMaterial({color:16711680,wireframe:!0,visible:!1})),this.world.add(this.intersectionPlane);window.addEventListener("unload",(function(e){console.log("Good bye! ^__^"),r.manager&&r.manager.destroy(),r.vfxRenderer&&r.vfxRenderer.destroy(),r.sim&&r.sim.destroy()})),this.manager.loadAll(),function t(){if(!r.loaded)return r.manager.failed()?void console.log("LOADING FAILED"):(requestAnimationFrame(t),void(1==r.manager.getProgress()&&(r.loaded=!0,function(){r.resize(),r.clock.start();var t=r.manager.get(0).content,n=new e.MeshBasicMaterial({color:3351295,wireframe:!0,visible:!1});r.emitters=[];var o=new e.MeshBasicMaterial({color:3351295,wireframe:!0,transparent:!0,opacity:i.showBird?.06:0,morphTargets:!0,skinning:!0,blending:e.AdditiveBlending}),a=Math.PI/2,s=new e.Vector3(0,1,0);t.scene.traverse((function(t){t.isMesh&&(-1<t.name.indexOf("Cube")?(t.material=n,t.parent.rotation.set(0,0,0),t.position.applyAxisAngle(s,a),r.emitters.push({ref:t,prev:t.position.clone(),direction:new e.Vector3})):t.material=o)})),r.world.add(t.scene),r.birdMat=o,r.birdMat.visible=!!i.showBird,r.birdState=r.birdMat.visible,r.emitterParent={position:t.scene.position.clone(),ref:t.scene,direction:new e.Vector3},r.mixer=new e.AnimationMixer(t.scene);var u=t.animations[0];r.flapLoop=e.AnimationUtils.subclip(u,"loop",90,169,30),r.flapAction=r.mixer.clipAction(r.flapLoop).play(),r.soar=e.AnimationUtils.subclip(u,"soar",250,290,30),r.soarAction=r.mixer.clipAction(r.soar),r.soarAction.weight=0,r.soarAction.loop=e.LoopOnce,r.soarAction.clampWhenFinished=!0,r.mode=0,function(){for(var t=new e.BufferGeometry,n=[],o=new c.default,a=0;a<g;a++)n.push(o.randi(-150,150),o.randi(-150,150),o.randi(-450,0));var s=new e.BufferAttribute(new Float32Array(n),3);t.setAttribute("position",s);for(var u=f.default.createCanvas(1024,1024),l=0,h=0;h<2;h++)for(var d=0;d<2;d++)f.default.createTileRadialGradient(u,{row:h,col:d,cols:2,rows:2},.5-.5*l/3,{r:255,g:255,b:255},1-.75*l/3),l++;if(r.envP=new e.Points(t,new e.RawShaderMaterial({vertexShader:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float time;\nuniform float size;\nuniform float soar;\n\nvarying vec3 vPos;\nvarying vec3 lightPos;\nvarying float vSize;\nvarying float vHue;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_1(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_1(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_1(vec4 x) {\n     return mod289_1(((x*34.0)+1.0)*x);\n}\n\nfloat permute_1(float x) {\n     return mod289_1(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_1(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_1(i);\n  float j0 = permute_1( permute_1( permute_1( permute_1(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_1( permute_1( permute_1( permute_1 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_0(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_0(vec3 x) {\n  return mod289_0(((x*34.0)+1.0)*x);\n}\n\nfloat snoise_0(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_0(i); // Avoid truncation effects in permutation\n  vec3 p = permute_0( permute_0( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nconst float HUE = 45.0;\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nvoid main () {\n    vec3 pos = position;\n\n    float t = time * .06;\n\n    vHue = (-.5 + .5 * random(position.xy)) * HUE / 360.0;\n\n    pos.x += 50.0 * snoise_1(vec4(position, t));\n    pos.y = 200.0 * snoise_0(vec2(position.x, t*.25));\n    pos.z = 100.0-600.0 * (1.0+snoise_0(vec2(position.z, t*.12)))/2.0;\n\n    if(soar > 0.) {\n        pos.x += 1. * snoise_1(vec4(position, t*16.0));\n        pos.y += 2. * snoise_0(vec2(position.y, t*16.0));\n        pos.z += 300. * soar  * sin(position.y + t*16.0);\n    }\n    /* else {\n        pos.y += 10. * sin(position.x + time*3.0);\n    } */\n\n    vPos = pos;\n\n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n\n    gl_PointSize = size * 256.0 / -mvPos.z;\n    vSize = gl_PointSize;\n    lightPos = vec3(-200.0, 100.0, 0.0);//vec3(200.0*sin(time*.1),200.0*cos(time*.11+.6),100.0-500.0*((cos(time*.11)+1.0)/2.0));\n    // lightPos = vec3(-200.0, 100.0, 0.0);\n}\n"]),fragmentShader:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D map;\n\nuniform vec3 color;// = vec3(0.05, 0.18, 0.74);\nconst vec2 uv = vec2(.5);\nconst float R = 300.0;\nuniform float soar;\nuniform float globalAlpha;\n\nvarying vec3 vPos;\nvarying vec3 lightPos;\nvarying float vSize;\nvarying float vHue;\n\nvec3 rgb2hsv(vec3 c) {\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// All components are in the range [0…1], including hue.\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main() {\n    vec2 uvStep = vec2(0., .5);\n    float depth = 1.0-clamp(vSize/30.0,0.0,1.0);\n    if (depth<.25) uvStep = vec2(.5,0.);\n    else if (depth<.5) uvStep = vec2(0.);\n    else if (depth<.75) uvStep = vec2(.5);\n    vec4 col = texture2D(map, gl_PointCoord.xy*uv+uvStep);\n    // col = texture2D(map, gl_PointCoord.xy);\n    float d = distance(vPos+vec3(gl_PointCoord.xy*vSize,0.0), lightPos)/R;//clamp(distance(vPos+vec3(gl_PointCoord.xy*vSize,0.0), lightPos)/R, 0.0, 1.0);\n    vec3 hsv = rgb2hsv(color);\n    hsv.r += vHue;\n    vec3 l = mix(vec3(1.0), hsv2rgb(hsv), d);\n\n    float alpha = 1.0 - .5 * soar;\n    gl_FragColor = vec4(col.rgb * l,col.a * alpha * globalAlpha);\n    // gl_FragColor = vec4(col.rgb,col.a);\n}"]),uniforms:{time:{value:0},size:{value:5},map:{value:new e.CanvasTexture(u)},soar:{value:0},globalAlpha:{value:null==i.showAmbient||!0===i.showAmbient?1:0},color:{value:new e.Color(.05,.18,.74)}},transparent:!0,depthTest:!1,depthWrite:!1,blending:e.AdditiveBlending})),r.envP.material.visible=null==i.showAmbient||!0===i.showAmbient,r.world.add(r.envP),r.sim.enabled){for(var v=new e.BufferGeometry,m=[],b=[],D=p.default.TEX_SIZE,w=0;w<D;w++)for(var x=0;x<D;x++)m.push(x/(D-1),w/(D-1)),b.push(-D/2+D*x/(D-1),D/2-D*w/(D-1),0);v.setAttribute("position",new e.BufferAttribute(new Float32Array(b),3)),v.setAttribute("uv",new e.BufferAttribute(new Float32Array(m),2));var E=new e.RawShaderMaterial({vertexShader:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 uv;\nattribute vec3 position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float time;\nuniform float size;\nuniform sampler2D texPos;\nuniform sampler2D settings;\n\nvarying vec3 vPos;\nvarying vec3 lightPos;\nvarying float vSize;\nvarying float vHue;\nvarying float vAlpha;\n\nconst float E_IN = .1;\nconst float HUE = 45.0;\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nvoid main () {\n    vec4 tpos = texture2D(texPos, uv);\n    vec3 pos = tpos.rgb;\n\n    vec4 props = texture2D(settings, uv);\n    \n    float life = clamp((time-props.g)/P_LIFE, 0.0, 1.0);\n\n    vHue = (-.5 + .5 * random(uv)) * HUE / 360.0;\n\n    // if (life < 0.0001) pos = vec3(-100000.0); // send to cuenca\n    // if (life > 0.9999) pos = vec3(-100000.0); // send to cuenca\n\n    vAlpha = 1.0;\n    float eIn = props.b == 0.0 ? E_IN : .06;\n\n    if ( life < eIn ) vAlpha = life/eIn;\n    else vAlpha = 1.0 - (life-eIn)/(1.0-eIn);\n\n    vPos = pos;//tpos.a > 0.0 ? pos : vec3(-100000.0); // send to cuenca\n\n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n\n    gl_PointSize = vAlpha * size * 30.0 / -mvPos.z;\n    vSize = gl_PointSize;\n    lightPos = vec3(-200.0, 100.0, 0.0);//vec3(200.0*sin(time*.1),200.0*cos(time*.11+.6),100.0-500.0*((cos(time*.11)+1.0)/2.0));\n    // lightPos = vec3(-200.0, 100.0, 0.0);\n}\n"]),fragmentShader:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D map;\n\nuniform vec3 color;// = vec3(0.05, 0.18, 0.74);\nconst vec2 uv = vec2(.5);\nconst float R = 210.0;\n\nvarying vec3 vPos;\nvarying vec3 lightPos;\nvarying float vSize;\nvarying float vHue;\nvarying float vAlpha;\n\nuniform float globalAlpha;\n\nvec3 rgb2hsv(vec3 c) {\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// All components are in the range [0…1], including hue.\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main() {\n    vec2 uvStep = vec2(0., .5);\n    float depth = 1.0-clamp(vSize/30.0,0.0,1.0);\n    if (depth<.25) uvStep = vec2(.5,0.);\n    else if (depth<.5) uvStep = vec2(0.);\n    else if (depth<.75) uvStep = vec2(.5);\n    vec4 col = texture2D(map, gl_PointCoord.xy*uv+uvStep);\n    // col = texture2D(map, gl_PointCoord.xy);\n    float d = distance(vPos+vec3(gl_PointCoord.xy*vSize,0.0), lightPos)/R;//clamp(distance(vPos+vec3(gl_PointCoord.xy*vSize,0.0), lightPos)/R, 0.0, 1.0);\n    vec3 hsv = rgb2hsv(color);\n    hsv.r += vHue;\n    vec3 l = mix(vec3(1.0), hsv2rgb(hsv), d);\n    gl_FragColor = vec4(col.rgb * l,col.a*globalAlpha*vAlpha);\n    // gl_FragColor = vec4(col.rgb,col.a);\n}"]),transparent:!0,blending:e.AdditiveBlending,depthTest:!1,depthWrite:!1,uniforms:{size:{value:5},time:{value:0},map:{value:r.envP.material.uniforms.map.value},settings:{value:r.sim.settings.texture},texPos:{value:null},globalAlpha:{value:i.showBird?1:0},color:{value:new e.Color(.05,.18,.74)}},defines:{P_LIFE:p.default.PARTICLE_LIFE}});r.particles=new e.Points(v,E),E.visible=!!i.showBird,r.particles.frustumCulled=!1,r.world.add(r.particles)}}(),r.birdMat.color.copy(r.envP.material.uniforms.color.value),r.bird=t.scene,r.bird.position.z=r.intersectionPlane.position.z=-20}(),null!=v&&v())));i.manualUpdate||(requestAnimationFrame(t),r.update(),r.render())}()}else this.needsFallback=!0}var n,r;return n=t,(r=[{key:"setParticleScale",value:function(e){this.loaded&&(this.vfxRenderer.particleScale=e)}},{key:"goToView",value:function(e){if(this.loaded){var t=b[e].position,n=b[e].rotation;i.a.to(this.bird.position,{duration:1.5,x:t.x,ease:"power2.inOut"}),i.a.to(this.bird.rotation,{duration:1.5,y:n.y,ease:"power2.inOut"})}}},{key:"setColor",value:function(e){this.loaded&&(this.envP.material.uniforms.color.value.setStyle(e),this.sim.enabled&&this.particles.material.uniforms.color.value.setStyle(e),this.birdMat.color.copy(this.envP.material.uniforms.color.value))}},{key:"switchAmbient",value:function(e){var t=this;this.loaded&&(this.envP.material.visible=!0,this.envTween&&this.envTween.kill(),this.envTween=i.a.to(this.envP.material.uniforms.globalAlpha,{duration:1,value:e?1:0,onComplete:function(){e||(t.envP.material.visible=!1)}}))}},{key:"switchBird",value:function(e){var t=this;this.loaded&&(this.birdState=e,this.birdMat.visible=!0,this.sim.enabled&&(this.particles.material.visible=!0),this.birdTween&&this.birdTween.kill(),this.birdTween=i.a.to(this.birdMat,{duration:1,opacity:e?.06:0,onComplete:function(){e||(t.birdMat.visible=!1,t.sim.enabled&&(t.particles.material.visible=!1))}}),this.sim.enabled&&i.a.to(this.particles.material.uniforms.globalAlpha,{duration:1,value:e?1:0}))}},{key:"getBirdState",value:function(){return this.birdState}},{key:"swicthAll",value:function(e){this.switchBird(e),this.switchAmbient(e)}},{key:"soarMode",value:function(){this.loaded&&1!=this.mode&&(this.mode=1,i.a.to(this.flapAction,{duration:1,weight:0}),i.a.to(this.soarAction,{duration:1,weight:1}),i.a.to(this.envP.material.uniforms.soar,1,{value:1}),this.soarAction.play())}},{key:"flapMode",value:function(){this.loaded&&0!=this.mode&&(this.mode=0,i.a.to(this.flapAction,{duration:1,weight:1}),i.a.to(this.soarAction,{duration:1,weight:0}),i.a.to(this.envP.material.uniforms.soar,1,{value:0}))}},{key:"resize",value:function(){o.a.bounds.ww=window.innerWidth,o.a.bounds.wh=window.innerHeight,this.vfxRenderer.setSize(o.a.bounds.ww,o.a.bounds.wh),this.renderer.setSize(o.a.bounds.ww,o.a.bounds.wh),this.camera.aspect=o.a.bounds.ww/o.a.bounds.wh,this.camera.updateProjectionMatrix()}},{key:"update",value:function(){if(this.loaded){var t=this.clock.getDelta(),n=this.clock.elapsedTime;this.time=n,this.envP.material.uniforms.time.value=n,this.sim.enabled&&(this.particles.material.uniforms.time.value=n+100),this.mixer.update(t);for(var r=Math.PI/2,i=new e.Vector3(0,1,0),o=0,a=this.emitters.length;o<a;o++){var s=this.emitters[o];s.ref.position.applyAxisAngle(i,r),s.direction.copy(s.ref.position).sub(s.prev),s.prev.copy(s.ref.position)}var u=this.emitterParent.ref;this.emitterParent.direction.copy(u.position).sub(this.emitterParent.position),this.emitterParent.position.copy(u.position),this.bird.position.y=4*this.envP.material.uniforms.soar.value*Math.sin(2*n),this.bird.rotation.z=this.envP.material.uniforms.soar.value*Math.cos(2*n),this.intersectionPlane.position.copy(this.bird.position),this.intersectionPlane.rotation.copy(this.bird.rotation),this.controller.update(this.mouse),this.controller.rotateContainerOnMouse(this.world),this.raycaster.setFromCamera(this.mouse,this.camera);var l=this.raycaster.intersectObject(this.intersectionPlane);l.length?(this.intersected.point.copy(l[0].point),this.intersected.active=!0):this.intersected.active=!1,this.intersected.active?(this.mouseRepeller.w+=.16*(1-this.mouseRepeller.w),this.mouseRepeller.x+=.16*(this.intersected.point.x-this.mouseRepeller.x),this.mouseRepeller.y+=.16*(this.intersected.point.y-this.mouseRepeller.y),this.mouseRepeller.z+=.16*(this.intersected.point.z-this.mouseRepeller.z)):this.mouseRepeller.w+=.16*(0-this.mouseRepeller.w)}}},{key:"renderFbos",value:function(){var e=p.default.TEX_SIZE/2;this.sim.enabled&&(this.renderer.autoClear=!1,this.sim.direction.draw(this.renderer,0,0,e,e),this.sim.settings.draw(this.renderer,e,0,e,e),this.sim.position.draw(this.renderer,2*e,0,e,e),this.sim.position2.draw(this.renderer,3*e,0,e,e))}},{key:"render",value:function(){if(this.loaded){if(this.sim.enabled){var e=this.sim.compute(this.renderer,this.emitters,this.emitterParent,this.time,this.mode);this.particles.material.uniforms.texPos.value=e.texture}this.vfxRenderer.render(this.scene,this.camera,this.sim.enabled?[this.envP.material,this.particles.material]:[this.envP.material],this.time)}}}])&&m(n.prototype,r),t}();r.default=D},{"../libs/OrbitControls":17,"../sys/Random":18,"../sys/Utils":19,"../ui/CameraController":20,"./gfx/GPUParticleSim":5,"./gfx/VFXRenderer":7,"./gfx/utils/GLInfo":9,"./gfx/utils/GfxUtils":10,"./io/AssetsManager":12,"./io/GLTFAsset":13,glslify:1}],4:[function(t,n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,o=(i=t("./utils/FboHelper"))&&i.__esModule?i:{default:i};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t("glslify");var s=function(){function t(n,r){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{depth:!0,format:e.RGBFormat,wrapS:e.ClampToEdgeWrapping,wrapT:e.ClampToEdgeWrapping,type:e.UnsignedByteType,minFilter:e.LinearFilter,magFilter:e.LinearFilter};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=new e.WebGLRenderTarget(n,r),this.target.texture.format=i.format?i.format:e.RGBFormat,this.target.texture.minFilter=i.minFilter||e.LinearFilter,this.target.texture.magFilter=i.magFilter||e.LinearFilter,this.target.texture.wrapS=i.wrapS||e.ClampToEdgeWrapping,this.target.texture.wrapT=i.wrapT||e.ClampToEdgeWrapping,this.target.texture.generateMipmaps=!1,this.target.stencilBuffer=!1,this.target.depthBuffer=i.depth,this.target.texture.type=i.type||e.UnsignedByteType,i.depth&&(this.target.depthTexture=new e.DepthTexture,this.target.depthTexture.type=e.UnsignedShortType),this.helper=new o.default,this.texture=this.target.texture,this.texture.generateMipmaps=!1}var n,r;return n=t,(r=[{key:"resize",value:function(e,t){this.target.setSize(e,t)}},{key:"draw",value:function(e,t,n,r,i){var o=1<arguments.length&&void 0!==t?t:0,a=2<arguments.length&&void 0!==n?n:0,s=3<arguments.length&&void 0!==r?r:0,u=4<arguments.length&&void 0!==i?i:0;this.helper.render(this.target,e,o,a,s,u)}},{key:"destroy",value:function(){this.target.texture.dispose(),this.target.dispose()}}])&&a(n.prototype,r),t}();r.default=s},{"./utils/FboHelper":8,glslify:1}],5:[function(t,n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,s(t("./utils/GLInfo"));var i=s(t("./Fbo")),o=s(t("../../sys/Random")),a=s(t("../../sys/Utils"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=t("glslify"),c=a.default.isMobile()?64:128,f=c*c,h=a.default.isDesktop()?2:1,p=function(){function t(n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.enabled=n.fullFloatRenderTarget||n.halfFloatRenderTarget,this.enabled){this.gl=n,this.settings=this.createFBO(),this.direction=this.createFBO(),this.position=this.createFBO(),this.position2=this.createFBO(),this.rnd=new o.default,this.pingpong=0,this.buff=[this.position,this.position2],this.geo=new e.BufferGeometry;for(var i=[],a=[],s=0;s<c;s++)for(var u=0;u<c;u++)a.push(u/(c-1),1-s/(c-1)),i.push(-c/2+c*u/(c-1),c/2-c*s/(c-1),0);this.geo.setAttribute("position",new e.BufferAttribute(new Float32Array(i),3)),this.geo.setAttribute("uv",new e.BufferAttribute(new Float32Array(a),2)),this.simProg=new e.RawShaderMaterial({vertexShader:l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 uv;\nattribute vec3 position;\nvarying vec2 vUv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\n\nvoid main () {\n    vUv = uv;\n    vec3 pos = position;\n    \n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n    gl_PointSize = 1.0;\n}\n"]),fragmentShader:l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\n\nuniform vec3 source;\nuniform float scatter;\nuniform float alpha;\nuniform int id;\n\nuniform sampler2D dir;\n// uniform sampler2D prev;\nuniform sampler2D pos;\nuniform sampler2D settings;\nuniform float time;\nuniform float mode;\nuniform vec4 mouse;\n\nconst vec3 GRAVITY = vec3(0.,-3.8,0.);\n// const vec3 GRAVITY2 = vec3(0.,0.,-.4,8);\nconst float L = 20.0; // Life time in seconds\nconst float DAMP = 30.0;\nconst float MOUSE_R = 20.0;\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nvoid main () {\n    vec2 uv = vUv;\n    float rnd = random(uv);\n    if(id == 0) {\n        vec3 R = vec3(scatter) * (-.5 + .5 * rnd );\n        gl_FragColor.rgb = source + R;\n\n        // if(rnd < .5) gl_FragColor.r *=-1.0;\n        // gl_FragColor.a = alpha;\n    }\n    if(id == 1) {\n        // settings\n        gl_FragColor.rgb = vec3(.04 + .06*rnd,time,mode);\n    }\n    if (id == 2) {\n        vec3 force;\n        vec4 direction = texture2D(dir, uv);\n        vec4 position = texture2D(pos, uv);\n        vec4 props = texture2D(settings, uv);\n        // vec4 previous = texture2D(prev, uv);\n\n        float life = clamp((time-props.g)/P_LIFE, 0.0, 1.0);\n\n        if(life == 1.0) discard;\n        \n        float dS = life < .5 ? (1.-life/.5) : 0.;\n        vec3 pos = position.rgb;\n        force = direction.xyz * dS * DAMP + GRAVITY;\n        \n        // mouse repeller\n        float d = distance(pos, mouse.xyz);\n        float r = MOUSE_R * mouse.w; \n        if (d < r) {\n            force += normalize(pos-mouse.xyz) * (1.0-d/r) * 5.0; \n        }\n        \n        pos += force * props.r;\n\n        gl_FragColor.rgb = pos;\n        // gl_FragColor.a = 1.0;\n    }\n    /* if (id == 2) {\n        vec4 position = texture2D(pos, uv);\n        vec4 previous = texture2D(prev, uv);\n    } */\n}"]),depthTest:!1,depthWrite:!1,uniforms:{id:{value:0},source:{value:new e.Vector3},scatter:{value:0},alpha:{value:0},time:{value:0},dir:{value:null},pos:{value:null},settings:{value:null},mode:{value:0},mouse:{value:r}},defines:{P_LIFE:1.6}}),this.sim=new e.Points(this.geo,this.simProg),this.camera=new e.OrthographicCamera(-c/2,c/2,c/2,-c/2,1,100),this.camera.position.z=1,this.scene=new e.Scene,this.scene.add(this.camera),this.scene.add(this.sim),this.nParticles=0,this.emitterCount=h,this.emitter=new e.Mesh(new e.BoxBufferGeometry(2,2,2),new e.MeshBasicMaterial({color:16711680})),this.initialized=!1}else console.warn("GPU doesn't support necessary pixel types for GPU sim! Aborting...")}var n,r,s;return n=t,s=[{key:"TEX_SIZE",get:function(){return c}},{key:"MAX_PARTICLES",get:function(){return f}},{key:"PARTICLE_LIFE",get:function(){return 1.6}}],(r=[{key:"createFBO",value:function(){if(this.enabled){var t=this.gl.fullFloatRenderTarget&&!a.default.isMobile()?e.FloatType:e.HalfFloatType,n=e.RGBFormat;return t===e.FloatType?-1===this.gl.fullFloatFormats.indexOf("RGB")&&(n=e.RGBAFormat):-1===this.gl.halfFloatFormats.indexOf("RGB")&&(n=e.RGBAFormat),new i.default(c,c,{format:n,depth:!1,type:t,wrapS:e.ClampToEdgeWrapping,wrapT:e.ClampToEdgeWrapping,minFilter:e.NearestFilter,magFilter:e.NearestFilter})}}},{key:"compute",value:function(e,t,n,r,i){if(this.enabled){e.autoClear=!1,this.initialized||(this.initialized=!0,this.geo.setDrawRange(0,f),this.simProg.uniforms.scatter.value=0,this.simProg.uniforms.id.value=1,this.simProg.uniforms.dir.value=null,this.simProg.uniforms.pos.value=null,this.simProg.uniforms.settings.value=null,this.simProg.uniforms.scatter.value=0,this.simProg.uniforms.id.value=1,this.simProg.uniforms.time.value=0,e.setRenderTarget(this.settings.target),e.render(this.scene,this.camera),this.simProg.uniforms.source.value.set(1e3,1e3,1e3),this.simProg.uniforms.id.value=0,this.simProg.uniforms.scatter.value=10,e.setRenderTarget(this.buff[0].target),e.render(this.scene,this.camera),e.setRenderTarget(this.buff[1].target),e.render(this.scene,this.camera),this.simProg.uniforms.source.value.set(0,0,0),e.setRenderTarget(this.direction.target),e.render(this.scene,this.camera)),this.simProg.uniforms.time.value=r+100;var o=this.buff[this.pingpong];this.pingpong=(this.pingpong+1)%2;var a=this.buff[this.pingpong];0<this.nParticles&&(e.autoClear=!0,this.geo.setDrawRange(0,f),this.simProg.uniforms.dir.value=this.direction.texture,this.simProg.uniforms.settings.value=this.settings.texture,this.simProg.uniforms.pos.value=o.texture,this.simProg.uniforms.id.value=2,e.setRenderTarget(a.target),e.render(this.scene,this.camera)),e.autoClear=!1;for(var s=0,u=t.length;s<u;s++){var l=t[s],c=Math.random()<.5;this.geo.setDrawRange(this.nParticles,this.emitterCount),this.simProg.uniforms.source.value.copy(l.direction),1==i&&this.simProg.uniforms.source.value.set(0,0,-.6),this.simProg.uniforms.source.value.add(n.direction),c&&(this.simProg.uniforms.source.value.x*=-1),this.simProg.uniforms.scatter.value=0,this.simProg.uniforms.id.value=0,this.simProg.uniforms.dir.value=null,this.simProg.uniforms.pos.value=null,this.simProg.uniforms.settings.value=null,e.setRenderTarget(this.direction.target),e.render(this.scene,this.camera),this.simProg.uniforms.id.value=1,this.simProg.uniforms.mode.value=i,e.setRenderTarget(this.settings.target),e.render(this.scene,this.camera),this.simProg.uniforms.source.value.copy(l.ref.position),c&&(this.simProg.uniforms.source.value.x*=-1),this.simProg.uniforms.source.value.applyMatrix4(n.ref.matrix),this.simProg.uniforms.source.value.y+=2.5,1==i&&(this.simProg.uniforms.source.value.z+=10),this.simProg.uniforms.id.value=0,this.simProg.uniforms.scatter.value=5,e.setRenderTarget(a.target),e.render(this.scene,this.camera),this.nParticles+=this.emitterCount,this.nParticles>f&&(this.nParticles=0)}return e.setRenderTarget(null),e.autoClear=!0,a}}},{key:"destroy",value:function(){this.enabled&&(this.direction.destroy(),this.position.destroy(),this.settings.destroy(),this.position2.destroy())}}])&&u(n.prototype,r),s&&u(n,s),t}();r.default=p},{"../../sys/Random":18,"../../sys/Utils":19,"./Fbo":4,"./utils/GLInfo":9,glslify:1}],6:[function(t,n,r){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,t("glslify");var o=function(){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1);var r=new e.PlaneBufferGeometry(2,2);this.quad=new e.Mesh(r,n),this.scene=new e.Scene,this.scene.add(this.quad)}var n,r;return n=t,(r=[{key:"resize",value:function(e,t){this.target.setSize(e,t)}},{key:"render",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:null,i=2<arguments.length&&void 0!==n?n:null;null!=r&&(this.quad.material=r),e.setRenderTarget(i),e.render(this.scene,this.camera)}}])&&i(n.prototype,r),t}();r.default=o},{glslify:1}],7:[function(t,n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=u(t("./RenderPass")),a=u(t("./Fbo")),s=u(t("../../sys/Utils"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u(t("./utils/GLInfo"));var c=t("glslify"),f=function(){function t(n,r){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1.5;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=n,this.glInfo=r,this.particleRatio=1,this.particleScale=.85,this.pixelRatio=Math.min(s,window.devicePixelRatio||1),this.glInfo.crapGPU&&(this.pixelRatio=Math.min(1,s)),-1<this.glInfo.vendor.toLowerCase().indexOf("nvidia")&&-1<navigator.appName.indexOf("Mac")&&(this.pixelRatio=1),this.renderer.setPixelRatio(this.pixelRatio),this.vfxEnabled=!0,this.stack=[],this.resolution=new e.Vector2(o.a.bounds.ww,o.a.bounds.wh),this.vfxEnabled&&(this.renderPass=new i.default,this.sceneFbo=new a.default(o.a.bounds.ww*this.pixelRatio,o.a.bounds.wh*this.pixelRatio),this.fbo=new a.default(o.a.bounds.ww*this.pixelRatio,o.a.bounds.wh*this.pixelRatio,{format:e.RGBAFormat}),this.fbo2=new a.default(o.a.bounds.ww*this.pixelRatio,o.a.bounds.wh*this.pixelRatio,{format:e.RGBAFormat}),this.glowFbo=new a.default(o.a.bounds.ww*this.pixelRatio*.25,o.a.bounds.wh*this.pixelRatio*.25,{format:e.RGBAFormat}),this.glowPass=new e.RawShaderMaterial({vertexShader:c(["precision lowp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main () {\n    vec3 pos = position;\n\n    vUv = uv;\n    \n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n}\n"]),fragmentShader:c(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\n\n// bloom vars\nfloat kernel = .005;\nuniform float scale;\nuniform float thresh;\nuniform float alpha;\n\nvoid main()\n{\n    vec4 sum = vec4(0);\n\n    // mess of for loops due to gpu compiler/hardware limitations\n    int j=-2;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tDiffuse,vUv+vec2(i,j)*kernel);\n    j=-1;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tDiffuse,vUv+vec2(i,j)*kernel);\n    j=0;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tDiffuse,vUv+vec2(i,j)*kernel);\n    j=1;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tDiffuse,vUv+vec2(i,j)*kernel);\n    j=2;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tDiffuse,vUv+vec2(i,j)*kernel);\n    sum/=25.0;\n\n    vec4 s=texture2D(tDiffuse, vUv);\n    gl_FragColor=s;\n\n    // use the blurred colour if it's bright enough\n    if (length(sum)>thresh)\n    {\n        gl_FragColor +=sum*scale;\n    }\n\n    gl_FragColor.a = alpha;\n}"]),uniforms:{resolution:{value:new e.Vector2},tDiffuse:{value:null},thresh:{value:0},scale:{value:2.65},alpha:{value:.08}},transparent:!0,blending:e.AdditiveBlending}),this.stack.push(new e.RawShaderMaterial({vertexShader:c(["precision lowp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main () {\n    vec3 pos = position;\n\n    vUv = uv;\n    \n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n}\n"]),fragmentShader:c(["precision lowp float;\n#define GLSLIFY 1\n\nuniform sampler2D tBase;\nuniform sampler2D tDiffuse;\n\nvarying vec2 vUv;\n\nvoid main() {\n    gl_FragColor = texture2D(tBase, vUv) + texture2D(tDiffuse, vUv);\n}"]),uniforms:{tBase:{value:null},tDiffuse:{value:null}}})),this.stack.push(new e.RawShaderMaterial({vertexShader:c(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main () {\n    vec3 pos = position;\n\n    vUv = uv;\n    \n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n}\n"]),fragmentShader:c(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\n\nuniform float time;\n\nconst float falloff = .49;\nconst float amount = .65;\n\nhighp float basicDithering (in vec2 st, float intensity) {\n    return mix(-intensity/ 255., intensity/255., fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123));\n}\n\nvoid main () {\n    // dithering grain\n    float dither = basicDithering(vUv+vec2(sin(time),cos(time)), 12.0);\n    vec3 color = texture2D(tDiffuse, vUv).rgb + dither;\n\n    // vignetting\n    float dist = distance(vUv, vec2(0.5, 0.5));\n    color.rgb *= smoothstep(0.8, falloff * 0.799, dist * (amount + falloff));\n\n    gl_FragColor = vec4(color,1.0);\n}"]),uniforms:{time:{value:0},tDiffuse:{value:null}}})))}var n,r;return n=t,(r=[{key:"setSize",value:function(e,t){if(this.glInfo.crapGPU)if(2073600<e*t){var n=2073600/(e*t);e*=n,t*=n,this.particleRatio=2073600/(e*t)}else this.particleRatio=1;if(this.renderer.setSize(e,t),this.resolution.set(e,t),this.vfxEnabled){this.sceneFbo.resize(e*this.pixelRatio,t*this.pixelRatio),this.fbo.resize(e*this.pixelRatio,t*this.pixelRatio),this.fbo2.resize(e*this.pixelRatio,t*this.pixelRatio),this.glowFbo.resize(e*this.pixelRatio*.25,t*this.pixelRatio*.25),this.glowPass.uniforms.resolution.value.set(e*this.pixelRatio*.25,t*this.pixelRatio*.25);var r=!0,i=!1,o=void 0;try{for(var a,s=this.stack[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.uniforms.resolution&&u.uniforms.resolution.value.set(e*this.pixelRatio,t*this.pixelRatio)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}},{key:"pass",value:function(e,t,n,r){var i,o,a=this.sceneFbo.target.depthTexture;return o=0==t?(i=this.sceneFbo.texture,this.fbo):t%2==0?(i=this.fbo2.texture,this.fbo):(i=this.fbo.texture,this.fbo2),e.uniforms.tDiffuse.value=i,e.uniforms.time&&(e.uniforms.time.value=r),e.uniforms.tDepth&&(e.uniforms.tDepth.value=a),e.uniforms.cameraNear&&(e.uniforms.cameraNear.value=n.near),e.uniforms.cameraFar&&(e.uniforms.cameraFar.value=n.far),this.renderPass.render(this.renderer,e,o.target),o}},{key:"render",value:function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:0;if(this.vfxEnabled){n[0].uniforms.size.value=40*this.particleScale*this.pixelRatio/this.particleRatio,1<n.length&&(n[1].uniforms.size.value=10*this.particleScale*this.pixelRatio/this.particleRatio,n[1].visible=s.default.isDesktop()&&!this.glInfo.crapGPU),this.renderer.setRenderTarget(this.sceneFbo.target),this.renderer.render(e,t),this.glowPass.uniforms.tDiffuse.value=this.sceneFbo.texture,this.renderPass.render(this.renderer,this.glowPass,this.glowFbo.target),n[0].uniforms.size.value=5*this.particleScale*this.pixelRatio/this.particleRatio,1<n.length&&(n[1].uniforms.size.value=5*this.particleScale*this.pixelRatio/this.particleRatio,n[1].visible=!0),this.renderer.setRenderTarget(this.sceneFbo.target),this.renderer.render(e,t);var a=0,u=null;this.stack[0].uniforms.tBase.value=this.glowFbo.texture;var l=!0,c=!1,f=void 0;try{for(var h,p=this.stack[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=h.value;u=this.pass(d,a++,t,i)}}catch(e){c=!0,f=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}this.renderer.setRenderTarget(null),null==u?this.sceneFbo.draw(this.renderer,0,0,o.a.bounds.ww,o.a.bounds.wh):u.draw(this.renderer,0,0,o.a.bounds.ww,o.a.bounds.wh)}else this.renderer.render(e,t)}},{key:"destroy",value:function(){this.vfxEnabled&&(this.sceneFbo.destroy(),this.glowFbo.destroy(),this.fbo.destroy(),this.fbo2.destroy())}}])&&l(n.prototype,r),t}();r.default=f},{"../../sys/Utils":19,"./Fbo":4,"./RenderPass":6,"./utils/GLInfo":9,glslify:1}],8:[function(t,n,r){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=t("glslify"),a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1),this.material=new e.RawShaderMaterial({vertexShader:o(["precision lowp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main () {\n    vec3 pos = position;\n\n    vUv = uv;\n    \n    vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPos;\n}\n"]),fragmentShader:o(["precision lowp float;\n#define GLSLIFY 1\n\nuniform sampler2D map;\n\nvarying vec2 vUv;\n\nvoid main() {\n    gl_FragColor = texture2D(map, vUv);\n}"]),uniforms:{map:{value:null}},transparent:!0});var n=new e.PlaneBufferGeometry(1,1);this.quad=new e.Mesh(n,this.material),this.scene=new e.Scene,this.scene.add(this.quad)}var n,r;return n=t,(r=[{key:"render",value:function(t,n,r,i,o,a){var s=2<arguments.length&&void 0!==r?r:0,u=3<arguments.length&&void 0!==i?i:0,l=4<arguments.length&&void 0!==o?o:0,c=5<arguments.length&&void 0!==a?a:0;0!=l&&0!=c||(l=t.width,c=t.height);var f=new e.Vector2;n.getSize(f);var h=new e.OrthographicCamera(-f.width/2,f.width/2,f.height/2,-f.height/2,0,1);this.quad.scale.set(l,c,1),this.quad.position.set(-f.width/2+l/2+s,f.height/2-c/2-u,0),this.material.uniforms.map.value=t.texture,n.render(this.scene,h)}},{key:"destroy",value:function(){this.quad.geometry.dispose()}}])&&i(n.prototype,r),t}();r.default=a},{glslify:1}],9:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(this.gl=t).getExtension("WEBGL_debug_renderer_info"),r=t.getExtension("OES_texture_float"),i=t.getExtension("OES_texture_half_float");this.dds=t.getExtension("WEBGL_compressed_texture_s3tc"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxCubeTextureSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxTextureUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxViewportSize=t.getParameter(t.MAX_VIEWPORT_DIMS),this.pointSizeMin=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[0],this.pointSizeMax=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[1],this.maxVertexImageUnits=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.renderer=n&&t.getParameter(n.UNMASKED_RENDERER_WEBGL)?t.getParameter(n.UNMASKED_RENDERER_WEBGL):"unknown",this.vendor=n&&t.getParameter(n.UNMASKED_VENDOR_WEBGL)?t.getParameter(n.UNMASKED_VENDOR_WEBGL):"unknown",this.halfFloatFormats=[],this.fullFloatFormats=[],i&&this.checkRenderTargetSupport(t.RGBA,i.HALF_FLOAT_OES)&&this.halfFloatFormats.push("RGBA"),i&&this.checkRenderTargetSupport(t.RGB,i.HALF_FLOAT_OES)&&this.halfFloatFormats.push("RGB"),r&&this.checkRenderTargetSupport(t.RGBA,t.FLOAT)&&this.fullFloatFormats.push("RGBA"),r&&this.checkRenderTargetSupport(t.RGB,t.FLOAT)&&this.fullFloatFormats.push("RGB"),this.halfFloatRenderTarget=0<this.halfFloatFormats.length,this.fullFloatRenderTarget=0<this.fullFloatFormats.length,null==this.halfFloatRenderTarget&&(this.halfFloatRenderTarget=!1),null==this.fullFloatRenderTarget&&(this.fullFloatRenderTarget=!1),this.crapGPU=-1<this.vendor.indexOf("Intel")||this.pointSizeMax<260||this.maxViewportSize<4096,this.ultraCrapDesktop=this.maxViewportSize<8192,this.ultraCrapMobile=this.maxViewportSize<4096}var t,n;return t=e,(n=[{key:"checkRenderTargetSupport",value:function(e,t){var n=this.gl.createFramebuffer(),r=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,e,2,2,0,e,t,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,r,0);var i=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null),i===this.gl.FRAMEBUFFER_COMPLETE}}])&&r(t.prototype,n),e}();n.default=i},{}],10:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=null,o=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==i&&(i=this),i}var t,n;return t=e,n=[{key:"createCanvas",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:512,r=1<arguments.length&&void 0!==t?t:512,i=document.createElement("canvas");return i.width=n,i.height=r,i}},{key:"createFullRadialGradient",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:0,r=e.getContext("2d"),i=e.width,o=i,a=i/2,s=i/2,u=r.createRadialGradient(a,a,s*n,a,a,s);return u.addColorStop(0,"#fff"),u.addColorStop(1,"rgba(255,255,255,0"),r.fillStyle=u,r.fillRect(0,0,i,o),u}},{key:"createTileRadialGradient",value:function(e,t,n,r,i){var o=2<arguments.length&&void 0!==n?n:0,a=3<arguments.length&&void 0!==r?r:{r:255,g:255,b:255},s=4<arguments.length&&void 0!==i?i:1,u=e.getContext("2d"),l=e.width/t.rows,c=l,f=e.width*t.col/t.cols+l/2,h=e.width*t.row/t.rows+l/2,p=l/2,d=u.createRadialGradient(f,h,p*o,f,h,p);return d.addColorStop(0,"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(s,")")),d.addColorStop(1,"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", 0)")),u.fillStyle=d,u.fillRect(f-p,h-p,l,c),d}}],null&&r(t.prototype,null),n&&r(t,n),e}();n.default=o},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./io"))&&r.__esModule?r:{default:r};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.loaded=!1,this.content=null,this.binary=n,this.failed=!1}var t,n;return t=e,(n=[{key:"load",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:null;if(!this.loaded)return this.binary?void i.default.loadBinary(this.url,(function(e){t.content=e,t.loaded=!0,null!=n&&n()}),(function(e){t.failed=!0,console.warn("Failed loading Asset",e.status)})):i.default.load(this.url,(function(e){t.content=e,t.loaded=!0,null!=n&&n()}),(function(e){t.failed=!0,console.warn("Failed loading Asset",e.status)}))}},{key:"destroy",value:function(){this.content=null}}])&&o(t.prototype,n),e}();n.default=a},{"./io":14}],12:[function(e,t,n){var r;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(r=e("./Asset"))&&r.__esModule;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.assets=[]}var t,n;return t=e,(n=[{key:"add",value:function(e){this.assets.push(e)}},{key:"loadAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assets[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.load()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"load",value:function(e){e<this.assets.length&&!this.assets[e].loaded?this.assets[e].load():console.warn("Asset out of range or already loaded")}},{key:"getProgress",value:function(){var e=0,t=0,n=!0,r=!1,i=void 0;try{for(var o,a=this.assets[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)o.value.loaded&&(t++,e+=1/this.assets.length)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t===this.assets.length&&(e=1),e}},{key:"get",value:function(e){return this.assets[e]}},{key:"getByURL",value:function(e){for(var t=0;t<this.assets.length;t++)if(this.assets[t].url==e)return this.assets[t];return null}},{key:"getIndexByURL",value:function(e){for(var t=0;t<this.assets.length;t++)if(this.assets[t].url==e)return t;return-1}},{key:"destroy",value:function(){for(var e=0;e<this.assets.length;e++)this.assets[e].destroy();this.asstes=null}},{key:"failed",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assets[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)if(r.value.failed)return!0}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1}}])&&i(t.prototype,n),e}();n.default=o},{"./Asset":11}],13:[function(t,n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,o=(i=t("./Asset"))&&i.__esModule?i:{default:i};function s(e){return(s="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t("../../libs/GLTFLoader");var f=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,l(t).call(this,e))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o.default),n=t,(r=[{key:"load",value:function(t){var n=this,r=0<arguments.length&&void 0!==t?t:null,i=this.url;(new e.GLTFLoader).load(this.url,(function(e){e.animations,e.scene,e.scenes,e.cameras,e.asset,n.content=e,n.loaded=!0,null!=r&&r()}),(function(e){}),(function(e){console.warn("Error loading",i),n.failed=!0}))}},{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.content.scene.children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.geometry&&o.geometry.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.content.scene=null,this.content=null}}])&&u(n.prototype,r),t}();r.default=f},{"../../libs/GLTFLoader":16,"./Asset":11}],14:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=null,o=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==i&&(i=this),i}var t,n;return t=e,n=[{key:"load",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:null,i=2<arguments.length&&void 0!==n?n:null,o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){400<=o.status&&i(o),200==o.status&&null!=r&&r(o.response)},o.send()}},{key:"loadBinary",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:null,i=2<arguments.length&&void 0!==n?n:null,o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){400<=o.status&&i(o),200==o.status&&null!=r&&r(o.response)},o.send()}}],null&&r(t.prototype,null),n&&r(t,n),e}();new(n.default=o)},{}],15:[function(e,n,r){(function(t){var n,r=(n=e("./core/App"))&&n.__esModule?n:{default:n};t.glLayer=window.glLayer=r.default}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core/App":3}],16:[function(t,n,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}e.GLTFLoader=function(){function t(t){e.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null}function n(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}t.prototype=Object.assign(Object.create(e.Loader.prototype),{constructor:t,load:function(t,n,r,i){var o,a=this;function s(e){i?i(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)}o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:e.LoaderUtils.extractUrlBase(t),a.manager.itemStart(t);var u=new e.FileLoader(a.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&u.setWithCredentials(!0),u.load(t,(function(e){try{a.parse(e,o,(function(e){n(e),a.manager.itemEnd(t)}),s)}catch(e){s(e)}}),r,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(t,n,i,l){var c,v={};if("string"==typeof t)c=t;else if(e.LoaderUtils.decodeText(new Uint8Array(t,0,4))===u){try{v[r.KHR_BINARY_GLTF]=new f(t)}catch(t){return void(l&&l(t))}c=v[r.KHR_BINARY_GLTF].content}else c=e.LoaderUtils.decodeText(new Uint8Array(t));var m=JSON.parse(c);if(void 0===m.asset||m.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(m.extensionsUsed)for(var y=0;y<m.extensionsUsed.length;++y){var g=m.extensionsUsed[y],b=m.extensionsRequired||[];switch(g){case r.KHR_LIGHTS_PUNCTUAL:v[g]=new a(m);break;case r.KHR_MATERIALS_UNLIT:v[g]=new s;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:v[g]=new d;break;case r.KHR_DRACO_MESH_COMPRESSION:v[g]=new h(m,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:v[g]=new o(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:v[g]=new p;break;default:0<=b.indexOf(g)&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}new j(m,v,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(i,l)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function o(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function a(e){this.name=r.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function s(){this.name=r.KHR_MATERIALS_UNLIT}a.prototype.loadLight=function(t){var n,r=this.lightDefs[t],i=new e.Color(16777215);void 0!==r.color&&i.fromArray(r.color);var o=void 0!==r.range?r.range:0;switch(r.type){case"directional":(n=new e.DirectionalLight(i)).target.position.set(0,0,-1),n.add(n.target);break;case"point":(n=new e.PointLight(i)).distance=o;break;case"spot":(n=new e.SpotLight(i)).distance=o,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,n.angle=r.spot.outerConeAngle,n.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,n.target.position.set(0,0,-1),n.add(n.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+r.type+'".')}return n.position.set(0,0,0),n.decay=2,void 0!==r.intensity&&(n.intensity=r.intensity),n.name=r.name||"light_"+t,Promise.resolve(n)},s.prototype.getMaterialType=function(){return e.MeshBasicMaterial},s.prototype.extendParams=function(t,n,r){var i=[];t.color=new e.Color(1,1,1),t.opacity=1;var o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(r.assignTexture(t,"map",o.baseColorTexture))}return Promise.all(i)};var u="glTF",l=12,c={JSON:1313821514,BIN:5130562};function f(t){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,l);if(this.header={magic:e.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==u)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var i=new DataView(t,l),o=0;o<i.byteLength;){var a=i.getUint32(o,!0);o+=4;var s=i.getUint32(o,!0);if(o+=4,s===c.JSON){var f=new Uint8Array(t,l+o,a);this.content=e.LoaderUtils.decodeText(f)}else if(s===c.BIN){var h=l+o;this.body=t.slice(h,h+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function p(){this.name=r.KHR_TEXTURE_TRANSFORM}function d(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return e.ShaderMaterial},extendParams:function(t,n,r){var i=n.extensions[this.name],o=e.ShaderLib.standard,a=e.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),f=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",f);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new e.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},t.vertexShader=o.vertexShader,t.fragmentShader=h,t.uniforms=a,t.defines={STANDARD:""},t.color=new e.Color(1,1,1),t.opacity=1;var p=[];if(Array.isArray(i.diffuseFactor)){var d=i.diffuseFactor;t.color.fromArray(d),t.opacity=d[3]}if(void 0!==i.diffuseTexture&&p.push(r.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new e.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new e.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var v=i.specularGlossinessTexture;p.push(r.assignTexture(t,"glossinessMap",v)),p.push(r.assignTexture(t,"specularMap",v))}return Promise.all(p)},createMaterial:function(t){var n=new e.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return n.isGLTFSpecularGlossinessMaterial=!0,n.color=t.color,n.map=void 0===t.map?null:t.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=void 0===t.aoMap?null:t.aoMap,n.aoMapIntensity=1,n.emissive=t.emissive,n.emissiveIntensity=1,n.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,n.bumpMap=void 0===t.bumpMap?null:t.bumpMap,n.bumpScale=1,n.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(n.normalScale=t.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=void 0===t.specularMap?null:t.specularMap,n.specular=t.specular,n.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,n.glossiness=t.glossiness,n.alphaMap=null,n.envMap=void 0===t.envMap?null:t.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n.extensions.derivatives=!0,n},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++){var o=e[n[r]];t[n[r]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,n,r,i){if(!0===i.isGLTFSpecularGlossinessMaterial){var o,a=i.uniforms,s=i.defines;a.opacity.value=i.opacity,a.diffuse.value.copy(i.color),a.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),a.map.value=i.map,a.specularMap.value=i.specularMap,a.alphaMap.value=i.alphaMap,a.lightMap.value=i.lightMap,a.lightMapIntensity.value=i.lightMapIntensity,a.aoMap.value=i.aoMap,a.aoMapIntensity.value=i.aoMapIntensity,i.map?o=i.map:i.specularMap?o=i.specularMap:i.displacementMap?o=i.displacementMap:i.normalMap?o=i.normalMap:i.bumpMap?o=i.bumpMap:i.glossinessMap?o=i.glossinessMap:i.alphaMap?o=i.alphaMap:i.emissiveMap&&(o=i.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),a.uvTransform.value.copy(o.matrix)),i.envMap&&(a.envMap.value=i.envMap,a.envMapIntensity.value=i.envMapIntensity,a.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,a.reflectivity.value=i.reflectivity,a.refractionRatio.value=i.refractionRatio,a.maxMipLevel.value=e.properties.get(i.envMap).__maxMipLevel),a.specular.value.copy(i.specular),a.glossiness.value=i.glossiness,a.glossinessMap.value=i.glossinessMap,a.emissiveMap.value=i.emissiveMap,a.bumpMap.value=i.bumpMap,a.normalMap.value=i.normalMap,a.displacementMap.value=i.displacementMap,a.displacementScale.value=i.displacementScale,a.displacementBias.value=i.displacementBias,null!==a.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function v(t,n,r,i){e.Interpolant.call(this,t,n,r,i)}h.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var l in o){var c=w[l]||l.toLowerCase();a[c]=o[l]}for(l in e.attributes)if(c=w[l]||l.toLowerCase(),void 0!==o[l]){var f=n.accessors[e.attributes[l]],h=y[f.componentType];u[c]=h,s[c]=!0===f.normalized}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),a,u)}))}))},p.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},((v.prototype=Object.create(e.Interpolant.prototype)).constructor=v).prototype.beforeStart_=v.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},v.prototype.afterEnd_=v.prototype.copySampleValue_,v.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=r-t,c=(n-t)/l,f=c*c,h=f*c,p=e*u,d=p-u,v=-2*h+3*f,m=h-f,y=1-v,g=m-f+c,b=0;b!==a;b++){var D=o[d+b+a],w=o[d+b+s]*l,x=o[p+b+a],E=o[p+b]*l;i[b]=y*D+g*w+v*x+m*E}return i};var m,y={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},g={9728:e.NearestFilter,9729:e.LinearFilter,9984:e.NearestMipmapNearestFilter,9985:e.LinearMipmapNearestFilter,9986:e.NearestMipmapLinearFilter,9987:e.LinearMipmapLinearFilter},b={33071:e.ClampToEdgeWrapping,33648:e.MirroredRepeatWrapping,10497:e.RepeatWrapping},D={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},w={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},E={CUBICSPLINE:void 0,LINEAR:e.InterpolateLinear,STEP:e.InterpolateDiscrete},O={"image/png":e.RGBAFormat,"image/jpeg":e.RGBFormat};function S(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function C(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function P(e,t){void 0!==t.extras&&("object"===i(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function F(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length)for(e.morphTargetDictionary={},n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function T(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function _(t){if(t.isInterleavedBufferAttribute){for(var n=t.count,r=t.itemSize,i=t.array.slice(0,n*r),o=0,a=0;o<n;++o)i[a++]=t.getX(o),2<=r&&(i[a++]=t.getY(o)),3<=r&&(i[a++]=t.getZ(o)),4<=r&&(i[a++]=t.getW(o));return new e.BufferAttribute(i,r,t.normalized)}return t.clone()}function j(t,r,i){this.json=t||{},this.extensions=r||{},this.options=i||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new e.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function k(e,t,n){var r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var a in r){var s=w[a]||a.toLowerCase();s in e.attributes||i.push(o(r[a],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return P(e,t),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a&&(void 0!==(l=t[o]).POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),!r||!i);o++);if(!r&&!i)return Promise.resolve(e);var s=[],u=[];for(o=0,a=t.length;o<a;o++){var l=t[o];if(r){var c=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;s.push(c)}i&&(c=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal,u.push(c))}return Promise.all([Promise.all(s),Promise.all(u)]).then((function(n){for(var o=n[0],a=n[1],s=0,u=o.length;s<u;s++)e.attributes.position!==o[s]&&(o[s]=_(o[s]));for(s=0,u=a.length;s<u;s++)e.attributes.normal!==a[s]&&(a[s]=_(a[s]));for(s=0,u=t.length;s<u;s++){var l=t[s],c="morphTarget"+s;if(r&&void 0!==l.POSITION){var f=o[s];f.name=c;for(var h=e.attributes.position,p=0,d=f.count;p<d;p++)f.setXYZ(p,f.getX(p)+h.getX(p),f.getY(p)+h.getY(p),f.getZ(p)+h.getZ(p))}if(i&&void 0!==l.NORMAL){var v=a[s];v.name=c;var m=e.attributes.normal;for(p=0,d=v.count;p<d;p++)v.setXYZ(p,v.getX(p)+m.getX(p),v.getY(p)+m.getY(p),v.getZ(p)+m.getZ(p))}}return r&&(e.morphAttributes.position=o),i&&(e.morphAttributes.normal=a),e}))}(e,t.targets,n):e}))}function A(t,n,r,i){var o=r.nodes[t];return i.getDependency("node",t).then((function(t){return void 0===o.skin?t:i.getDependency("skin",o.skin).then((function(e){for(var t=[],r=0,o=(n=e).joints.length;r<o;r++)t.push(i.getDependency("node",n.joints[r]));return Promise.all(t)})).then((function(r){return t.traverse((function(t){if(t.isMesh){for(var i=[],o=[],a=0,s=r.length;a<s;a++){var u=r[a];if(u){i.push(u);var l=new e.Matrix4;void 0!==n.inverseBindMatrices&&l.fromArray(n.inverseBindMatrices.array,16*a),o.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[a])}t.bind(new e.Skeleton(i,o),t.matrixWorld)}})),t}));var n})).then((function(e){n.add(e);var t=[];if(o.children)for(var a=o.children,s=0,u=a.length;s<u;s++){var l=a[s];t.push(A(l,e,r,i))}return Promise.all(t)}))}return j.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};C(i,o,r),P(o,r),e(o)})).catch(t)},j.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,u=0,l=s.length;u<l;u++)e[s[u]].isBone=!0;for(var c=0,f=e.length;c<f;c++){var h=e[c];void 0!==h.mesh&&(void 0===r[h.mesh]&&(r[h.mesh]=i[h.mesh]=0),r[h.mesh]++,void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},j.prototype.getDependency=function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this.loadMesh(t);break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this.loadBufferView(t);break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this.loadMaterial(t);break;case"texture":i=this.loadTexture(t);break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;case"light":i=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i},j.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},j.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load(S(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},j.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},j.prototype.loadAccessor=function(t){var n=this,r=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(t){var o,a,s=t[0],u=D[i.type],l=y[i.componentType],c=l.BYTES_PER_ELEMENT,f=c*u,h=i.byteOffset||0,p=void 0!==i.bufferView?r.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;if(p&&p!==f){var v=Math.floor(h/p),m="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count,g=n.cache.get(m);g||(o=new l(s,v*p,i.count*p/c),g=new e.InterleavedBuffer(o,p/c),n.cache.add(m,g)),a=new e.InterleavedBufferAttribute(g,u,h%p/c,d)}else o=null===s?new l(i.count*u):new l(s,h,i.count*u),a=new e.BufferAttribute(o,u,d);if(void 0!==i.sparse){var b=D.SCALAR,w=y[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,E=i.sparse.values.byteOffset||0,O=new w(t[1],x,i.sparse.count*b),S=new l(t[2],E,i.sparse.count*u);null!==s&&(a=new e.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var C=0,P=O.length;C<P;C++){var F=O[C];if(a.setX(F,S[C*u]),2<=u&&a.setY(F,S[C*u+1]),3<=u&&a.setZ(F,S[C*u+2]),4<=u&&a.setW(F,S[C*u+3]),5<=u)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},j.prototype.loadTexture=function(t){var n,i=this,o=this.json,a=this.options,s=this.textureLoader,u=window.URL||window.webkitURL,l=o.textures[t],c=l.extensions||{},f=(n=c[r.MSFT_TEXTURE_DDS]?o.images[c[r.MSFT_TEXTURE_DDS].source]:o.images[l.source]).uri,h=!1;return void 0!==n.bufferView&&(f=i.getDependency("bufferView",n.bufferView).then((function(e){h=!0;var t=new Blob([e],{type:n.mimeType});return f=u.createObjectURL(t)}))),Promise.resolve(f).then((function(e){var t=a.manager.getHandler(e);return t=t||(c[r.MSFT_TEXTURE_DDS]?i.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(n,r){t.load(S(e,a.path),n,void 0,r)}))})).then((function(t){!0===h&&u.revokeObjectURL(f),t.flipY=!1,void 0!==l.name&&(t.name=l.name),n.mimeType in O&&(t.format=O[n.mimeType]);var r=(o.samplers||{})[l.sampler]||{};return t.magFilter=g[r.magFilter]||e.LinearFilter,t.minFilter=g[r.minFilter]||e.LinearMipmapLinearFilter,t.wrapS=b[r.wrapS]||e.RepeatWrapping,t.wrapT=b[r.wrapT]||e.RepeatWrapping,t}))},j.prototype.assignTexture=function(t,n,i){var o=this;return this.getDependency("texture",i.index).then((function(a){if(!a.isCompressedTexture)switch(n){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":a.format=e.RGBFormat}if(o.extensions[r.KHR_TEXTURE_TRANSFORM]){var s=void 0!==i.extensions?i.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;s&&(a=o.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(a,s))}t[n]=a}))},j.prototype.assignFinalMaterial=function(t){var n=t.geometry,i=t.material,o=this.extensions,a=void 0!==n.attributes.tangent,s=void 0!==n.attributes.color,u=void 0===n.attributes.normal,l=!0===t.isSkinnedMesh,c=0<Object.keys(n.morphAttributes).length,f=c&&void 0!==n.morphAttributes.normal;if(t.isPoints){var h="PointsMaterial:"+i.uuid,p=this.cache.get(h);p||(p=new e.PointsMaterial,e.Material.prototype.copy.call(p,i),p.color.copy(i.color),p.map=i.map,p.sizeAttenuation=!1,this.cache.add(h,p)),i=p}else if(t.isLine){h="LineBasicMaterial:"+i.uuid;var d=this.cache.get(h);d||(d=new e.LineBasicMaterial,e.Material.prototype.copy.call(d,i),d.color.copy(i.color),this.cache.add(h,d)),i=d}if(a||s||u||l||c){h="ClonedMaterial:"+i.uuid+":",i.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),l&&(h+="skinning:"),a&&(h+="vertex-tangents:"),s&&(h+="vertex-colors:"),u&&(h+="flat-shading:"),c&&(h+="morph-targets:"),f&&(h+="morph-normals:");var v=this.cache.get(h);v||(v=i.isGLTFSpecularGlossinessMaterial?o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(i):i.clone(),l&&(v.skinning=!0),a&&(v.vertexTangents=!0),s&&(v.vertexColors=e.VertexColors),u&&(v.flatShading=!0),c&&(v.morphTargets=!0),f&&(v.morphNormals=!0),this.cache.add(h,v)),i=v}i.aoMap&&void 0===n.attributes.uv2&&void 0!==n.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),n.setAttribute("uv2",new e.BufferAttribute(n.attributes.uv.array,2))),i.isGLTFSpecularGlossinessMaterial&&(t.onBeforeRender=o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),t.material=i},j.prototype.loadMaterial=function(t){var n,i=this,o=this.json,a=this.extensions,s=o.materials[t],u={},l=s.extensions||{},c=[];if(l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var f=a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=f.getMaterialType(),c.push(f.extendParams(u,s,i))}else if(l[r.KHR_MATERIALS_UNLIT]){var h=a[r.KHR_MATERIALS_UNLIT];n=h.getMaterialType(),c.push(h.extendParams(u,s,i))}else{n=e.MeshStandardMaterial;var p=s.pbrMetallicRoughness||{};if(u.color=new e.Color(1,1,1),u.opacity=1,Array.isArray(p.baseColorFactor)){var d=p.baseColorFactor;u.color.fromArray(d),u.opacity=d[3]}void 0!==p.baseColorTexture&&c.push(i.assignTexture(u,"map",p.baseColorTexture)),u.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,u.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(i.assignTexture(u,"metalnessMap",p.metallicRoughnessTexture)),c.push(i.assignTexture(u,"roughnessMap",p.metallicRoughnessTexture)))}!0===s.doubleSided&&(u.side=e.DoubleSide);var v=s.alphaMode||"OPAQUE";return"BLEND"===v?u.transparent=!0:(u.transparent=!1,"MASK"===v&&(u.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&n!==e.MeshBasicMaterial&&(c.push(i.assignTexture(u,"normalMap",s.normalTexture)),u.normalScale=new e.Vector2(1,1),void 0!==s.normalTexture.scale&&u.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&n!==e.MeshBasicMaterial&&(c.push(i.assignTexture(u,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(u.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&n!==e.MeshBasicMaterial&&(u.emissive=(new e.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&n!==e.MeshBasicMaterial&&c.push(i.assignTexture(u,"emissiveMap",s.emissiveTexture)),Promise.all(c).then((function(){var t;return t=n===e.ShaderMaterial?a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(u):new n(u),void 0!==s.name&&(t.name=s.name),t.map&&(t.map.encoding=e.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=e.sRGBEncoding),t.specularMap&&(t.specularMap.encoding=e.sRGBEncoding),P(t,s),s.extensions&&C(a,t,s),t}))},j.prototype.loadGeometries=function(t){var n=this,i=this.extensions,o=this.primitiveCache;function a(e){return i[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then((function(t){return k(t,e,n)}))}for(var s,u,l=[],c=0,f=t.length;c<f;c++){var h,p=t[c],d=(u=(s=p).extensions&&s.extensions[r.KHR_DRACO_MESH_COMPRESSION])?"draco:"+u.bufferView+":"+u.indices+":"+T(u.attributes):s.indices+":"+T(s.attributes)+":"+s.mode,v=o[d];v?l.push(v.promise):(h=p.extensions&&p.extensions[r.KHR_DRACO_MESH_COMPRESSION]?a(p):k(new e.BufferGeometry,p,n),o[d]={primitive:p,promise:h},l.push(h))}return Promise.all(l)},j.prototype.loadMesh=function(t){for(var n=this,r=this.json.meshes[t],i=r.primitives,o=[],a=0,s=i.length;a<s;a++){var u=void 0===i[a].material?m=m||new e.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e.FrontSide}):this.getDependency("material",i[a].material);o.push(u)}return Promise.all(o).then((function(o){return n.loadGeometries(i).then((function(a){for(var s=[],u=0,l=a.length;u<l;u++){var c,f=a[u],h=i[u],p=o[u];if(4===h.mode||5===h.mode||6===h.mode||void 0===h.mode)!0!==(c=!0===r.isSkinnedMesh?new e.SkinnedMesh(f,p):new e.Mesh(f,p)).isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),5===h.mode?c.drawMode=e.TriangleStripDrawMode:6===h.mode&&(c.drawMode=e.TriangleFanDrawMode);else if(1===h.mode)c=new e.LineSegments(f,p);else if(3===h.mode)c=new e.Line(f,p);else if(2===h.mode)c=new e.LineLoop(f,p);else{if(0!==h.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);c=new e.Points(f,p)}0<Object.keys(c.geometry.morphAttributes).length&&F(c,r),c.name=r.name||"mesh_"+t,1<a.length&&(c.name+="_"+u),P(c,r),n.assignFinalMaterial(c),s.push(c)}if(1===s.length)return s[0];var d=new e.Group;for(u=0,l=s.length;u<l;u++)d.add(s[u]);return d}))}))},j.prototype.loadCamera=function(t){var n,r=this.json.cameras[t],i=r[r.type];if(i)return"perspective"===r.type?n=new e.PerspectiveCamera(e.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===r.type&&(n=new e.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==r.name&&(n.name=r.name),P(n,r),Promise.resolve(n);console.warn("THREE.GLTFLoader: Missing camera parameters.")},j.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},j.prototype.loadAnimation=function(t){for(var n=this.json.animations[t],r=[],i=[],o=[],a=[],s=[],u=0,l=n.channels.length;u<l;u++){var c=n.channels[u],f=n.samplers[c.sampler],h=c.target,p=void 0!==h.node?h.node:h.id,d=void 0!==n.parameters?n.parameters[f.input]:f.input,m=void 0!==n.parameters?n.parameters[f.output]:f.output;r.push(this.getDependency("node",p)),i.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",m)),a.push(f),s.push(h)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(r){for(var i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=[],c=0,f=i.length;c<f;c++){var h=i[c],p=o[c],d=a[c],m=s[c],y=u[c];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,x[y.path]){case x.weights:g=e.NumberKeyframeTrack;break;case x.rotation:g=e.QuaternionKeyframeTrack;break;case x.position:case x.scale:default:g=e.VectorKeyframeTrack}var b=h.name?h.name:h.uuid,D=void 0!==m.interpolation?E[m.interpolation]:e.InterpolateLinear,w=[];x[y.path]===x.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)})):w.push(b);var O=d.array;if(d.normalized){var S;if(O.constructor===Int8Array)S=1/127;else if(O.constructor===Uint8Array)S=1/255;else if(O.constructor==Int16Array)S=1/32767;else{if(O.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");S=1/65535}for(var C=new Float32Array(O.length),P=0,F=O.length;P<F;P++)C[P]=O[P]*S;O=C}for(P=0,F=w.length;P<F;P++){var T=new g(w[P]+"."+x[y.path],p.array,O,D);"CUBICSPLINE"===m.interpolation&&(T.createInterpolant=function(e){return new v(this.times,this.values,this.getValueSize()/3,e)},T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(T)}}}var _=void 0!==n.name?n.name:"animation_"+t;return new e.AnimationClip(_,void 0,l)}))},j.prototype.loadNode=function(t){var n,i=this.json,o=this.extensions,a=this,s=i.meshReferences,u=i.meshUses,l=i.nodes[t];return(n=[],void 0!==l.mesh&&n.push(a.getDependency("mesh",l.mesh).then((function(e){var t;if(1<s[l.mesh]){var n=u[l.mesh]++;(t=e.clone()).name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var r=0,i=t.children.length;r<i;r++)t.children[r].name+="_instance_"+n,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==l.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=l.weights.length;t<n;t++)e.morphTargetInfluences[t]=l.weights[t]})),t}))),void 0!==l.camera&&n.push(a.getDependency("camera",l.camera)),l.extensions&&l.extensions[r.KHR_LIGHTS_PUNCTUAL]&&void 0!==l.extensions[r.KHR_LIGHTS_PUNCTUAL].light&&n.push(a.getDependency("light",l.extensions[r.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(n)).then((function(t){var n;if((n=!0===l.isBone?new e.Bone:1<t.length?new e.Group:1===t.length?t[0]:new e.Object3D)!==t[0])for(var r=0,i=t.length;r<i;r++)n.add(t[r]);if(void 0!==l.name&&(n.userData.name=l.name,n.name=e.PropertyBinding.sanitizeNodeName(l.name)),P(n,l),l.extensions&&C(o,n,l),void 0!==l.matrix){var a=new e.Matrix4;a.fromArray(l.matrix),n.applyMatrix(a)}else void 0!==l.translation&&n.position.fromArray(l.translation),void 0!==l.rotation&&n.quaternion.fromArray(l.rotation),void 0!==l.scale&&n.scale.fromArray(l.scale);return n}))},j.prototype.loadScene=function(t){var n=this.json,r=this.extensions,i=this.json.scenes[t],o=new e.Scene;void 0!==i.name&&(o.name=i.name),P(o,i),i.extensions&&C(r,o,i);for(var a=i.nodes||[],s=[],u=0,l=a.length;u<l;u++)s.push(A(a[u],o,n,this));return Promise.all(s).then((function(){return o}))},t}()},{}],17:[function(t,n,r){e.OrbitControls=function(t,n){var r,i,o,a,s;void 0===n&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=n,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:e.MOUSE.ROTATE,MIDDLE:e.MOUSE.DOLLY,RIGHT:e.MOUSE.PAN},this.touches={ONE:e.TOUCH.ROTATE,TWO:e.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return v.phi},this.getAzimuthalAngle=function(){return v.theta},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(l),u.update(),p=h.NONE},this.update=(r=new e.Vector3,i=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),o=i.clone().inverse(),a=new e.Vector3,s=new e.Quaternion,function(){var e=u.object.position;return r.copy(e).sub(u.target),r.applyQuaternion(i),v.setFromVector3(r),u.autoRotate&&p===h.NONE&&_(2*Math.PI/60/60*u.autoRotateSpeed),u.enableDamping?(v.theta+=m.theta*u.dampingFactor,v.phi+=m.phi*u.dampingFactor):(v.theta+=m.theta,v.phi+=m.phi),v.theta=Math.max(u.minAzimuthAngle,Math.min(u.maxAzimuthAngle,v.theta)),v.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=y,v.radius=Math.max(u.minDistance,Math.min(u.maxDistance,v.radius)),!0===u.enableDamping?u.target.addScaledVector(g,u.dampingFactor):u.target.add(g),r.setFromSpherical(v),r.applyQuaternion(o),e.copy(u.target).add(r),u.object.lookAt(u.target),!0===u.enableDamping?(m.theta*=1-u.dampingFactor,m.phi*=1-u.dampingFactor,g.multiplyScalar(1-u.dampingFactor)):(m.set(0,0,0),g.set(0,0,0)),y=1,!(!(b||a.distanceToSquared(u.object.position)>d||8*(1-s.dot(u.object.quaternion))>d)||(u.dispatchEvent(l),a.copy(u.object.position),s.copy(u.object.quaternion),b=!1))}),this.dispose=function(){u.domElement.removeEventListener("contextmenu",ne,!1),u.domElement.removeEventListener("mousedown",K,!1),u.domElement.removeEventListener("wheel",J,!1),u.domElement.removeEventListener("touchstart",$,!1),u.domElement.removeEventListener("touchend",te,!1),u.domElement.removeEventListener("touchmove",ee,!1),document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",Z,!1),u.domElement.removeEventListener("keydown",Q,!1)};var u=this,l={type:"change"},c={type:"start"},f={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=h.NONE,d=1e-6,v=new e.Spherical,m=new e.Spherical,y=1,g=new e.Vector3,b=!1,D=new e.Vector2,w=new e.Vector2,x=new e.Vector2,E=new e.Vector2,O=new e.Vector2,S=new e.Vector2,C=new e.Vector2,P=new e.Vector2,F=new e.Vector2;function T(){return Math.pow(.95,u.zoomSpeed)}function _(e){m.theta-=e}function j(e){m.phi-=e}var k,A,R,M=(k=new e.Vector3,function(e,t){k.setFromMatrixColumn(t,0),k.multiplyScalar(-e),g.add(k)}),L=(A=new e.Vector3,function(e,t){!0===u.screenSpacePanning?A.setFromMatrixColumn(t,1):(A.setFromMatrixColumn(t,0),A.crossVectors(u.object.up,A)),A.multiplyScalar(e),g.add(A)}),B=(R=new e.Vector3,function(e,t){var n=u.domElement;if(u.object.isPerspectiveCamera){var r=u.object.position;R.copy(r).sub(u.target);var i=R.length();i*=Math.tan(u.object.fov/2*Math.PI/180),M(2*e*i/n.clientHeight,u.object.matrix),L(2*t*i/n.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(M(e*(u.object.right-u.object.left)/u.object.zoom/n.clientWidth,u.object.matrix),L(t*(u.object.top-u.object.bottom)/u.object.zoom/n.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)});function I(e){u.object.isPerspectiveCamera?y/=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*e)),u.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function z(e){u.object.isPerspectiveCamera?y*=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/e)),u.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function U(e){D.set(e.clientX,e.clientY)}function G(e){E.set(e.clientX,e.clientY)}function N(e){if(1==e.touches.length)D.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);D.set(t,n)}}function V(e){if(1==e.touches.length)E.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(t,n)}}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);C.set(0,r)}function X(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}x.subVectors(w,D).multiplyScalar(u.rotateSpeed);var r=u.domElement;_(2*Math.PI*x.x/r.clientHeight),j(2*Math.PI*x.y/r.clientHeight),D.copy(w)}function Y(e){if(1==e.touches.length)O.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);O.set(t,n)}S.subVectors(O,E).multiplyScalar(u.panSpeed),B(S.x,S.y),E.copy(O)}function q(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);P.set(0,r),F.set(0,Math.pow(P.y/C.y,u.zoomSpeed)),I(F.y),C.copy(P)}function K(t){if(!1!==u.enabled){switch(t.preventDefault(),u.domElement.focus?u.domElement.focus():window.focus(),t.button){case 0:switch(u.mouseButtons.LEFT){case e.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===u.enablePan)return;G(t),p=h.PAN}else{if(!1===u.enableRotate)return;U(t),p=h.ROTATE}break;case e.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===u.enableRotate)return;U(t),p=h.ROTATE}else{if(!1===u.enablePan)return;G(t),p=h.PAN}break;default:p=h.NONE}break;case 1:switch(u.mouseButtons.MIDDLE){case e.MOUSE.DOLLY:if(!1===u.enableZoom)return;n=t,C.set(n.clientX,n.clientY),p=h.DOLLY;break;default:p=h.NONE}break;case 2:switch(u.mouseButtons.RIGHT){case e.MOUSE.ROTATE:if(!1===u.enableRotate)return;U(t),p=h.ROTATE;break;case e.MOUSE.PAN:if(!1===u.enablePan)return;G(t),p=h.PAN;break;default:p=h.NONE}}var n;p!==h.NONE&&(document.addEventListener("mousemove",W,!1),document.addEventListener("mouseup",Z,!1),u.dispatchEvent(c))}}function W(e){var t,n;if(!1!==u.enabled)switch(e.preventDefault(),p){case h.ROTATE:if(!1===u.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),x.subVectors(w,D).multiplyScalar(u.rotateSpeed);var t=u.domElement;_(2*Math.PI*x.x/t.clientHeight),j(2*Math.PI*x.y/t.clientHeight),D.copy(w),u.update()}(e);break;case h.DOLLY:if(!1===u.enableZoom)return;n=e,P.set(n.clientX,n.clientY),F.subVectors(P,C),0<F.y?I(T()):F.y<0&&z(T()),C.copy(P),u.update();break;case h.PAN:if(!1===u.enablePan)return;t=e,O.set(t.clientX,t.clientY),S.subVectors(O,E).multiplyScalar(u.panSpeed),B(S.x,S.y),E.copy(O),u.update()}}function Z(e){!1!==u.enabled&&(document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",Z,!1),u.dispatchEvent(f),p=h.NONE)}function J(e){var t;!1===u.enabled||!1===u.enableZoom||p!==h.NONE&&p!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),u.dispatchEvent(c),(t=e).deltaY<0?z(T()):0<t.deltaY&&I(T()),u.update(),u.dispatchEvent(f))}function Q(e){!1!==u.enabled&&!1!==u.enableKeys&&!1!==u.enablePan&&function(e){var t=!1;switch(e.keyCode){case u.keys.UP:B(0,u.keyPanSpeed),t=!0;break;case u.keys.BOTTOM:B(0,-u.keyPanSpeed),t=!0;break;case u.keys.LEFT:B(u.keyPanSpeed,0),t=!0;break;case u.keys.RIGHT:B(-u.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),u.update())}(e)}function $(t){if(!1!==u.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(u.touches.ONE){case e.TOUCH.ROTATE:if(!1===u.enableRotate)return;N(t),p=h.TOUCH_ROTATE;break;case e.TOUCH.PAN:if(!1===u.enablePan)return;V(t),p=h.TOUCH_PAN;break;default:p=h.NONE}break;case 2:switch(u.touches.TWO){case e.TOUCH.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;r=t,u.enableZoom&&H(r),u.enablePan&&V(r),p=h.TOUCH_DOLLY_PAN;break;case e.TOUCH.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;n=t,u.enableZoom&&H(n),u.enableRotate&&N(n),p=h.TOUCH_DOLLY_ROTATE;break;default:p=h.NONE}break;default:p=h.NONE}var n,r;p!==h.NONE&&u.dispatchEvent(c)}}function ee(e){var t,n;if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),p){case h.TOUCH_ROTATE:if(!1===u.enableRotate)return;X(e),u.update();break;case h.TOUCH_PAN:if(!1===u.enablePan)return;Y(e),u.update();break;case h.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;n=e,u.enableZoom&&q(n),u.enablePan&&Y(n),u.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;t=e,u.enableZoom&&q(t),u.enableRotate&&X(t),u.update();break;default:p=h.NONE}}function te(e){!1!==u.enabled&&(u.dispatchEvent(f),p=h.NONE)}function ne(e){!1!==u.enabled&&e.preventDefault()}u.domElement.addEventListener("contextmenu",ne,!1),u.domElement.addEventListener("mousedown",K,!1),u.domElement.addEventListener("wheel",J,!1),u.domElement.addEventListener("touchstart",$,!1),u.domElement.addEventListener("touchend",te,!1),u.domElement.addEventListener("touchmove",ee,!1),u.domElement.addEventListener("keydown",Q,!1),-1===u.domElement.tabIndex&&(u.domElement.tabIndex=0),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls,e.MapControls=function(t,n){e.OrbitControls.call(this,t,n),this.mouseButtons.LEFT=e.MOUSE.PAN,this.mouseButtons.RIGHT=e.MOUSE.ROTATE,this.touches.ONE=e.TOUCH.PAN,this.touches.TWO=e.TOUCH.DOLLY_ROTATE},e.MapControls.prototype=Object.create(e.EventDispatcher.prototype),e.MapControls.prototype.constructor=e.MapControls},{}],18:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("mersenne"),o=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed(t)}var t,n;return t=e,(n=[{key:"seed",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.seedValue=t,i.seed(t)}},{key:"random",value:function(){return i.rand(1e3)/999}},{key:"randi",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:0,r=1<arguments.length&&void 0!==t?t:1;return Math.round(this.randf(n,r))}},{key:"randf",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:0;return n+((1<arguments.length&&void 0!==t?t:1)-n)*this.random()}}])&&r(t.prototype,n),e}();n.default=o},{mersenne:2}],19:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=null,o=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==i&&(i=this),i}var t,n;return t=e,n=[{key:"el",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:null,i=2<arguments.length&&void 0!==n?n:null,o=document.createElement(e);return null!=r&&(o.className=r),null!=i&&i.appendChild(o),o}},{key:"webgl",value:function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&t instanceof WebGLRenderingContext}},{key:"isMobile",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"isBrowser",value:function(e){return-1<navigator.userAgent.toLowerCase().indexOf(e.toLowerCase())}},{key:"isSafari",value:function(){return!e.isBrowser("Chrome")&&e.isBrowser("Safari")}},{key:"getAndroidVersion",value:function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return!!e&&e[1]}},{key:"getIOSVersion",value:function(){if(e.isIphone()||e.isIpad()){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseFloat("".concat(parseInt(t[1],10),".").concat(parseInt(t[2],10)))}return-1}},{key:"isIphone",value:function(){return!!navigator.userAgent.match(/iPhone/i)}},{key:"isIpad",value:function(){var e=navigator.userAgent.toLowerCase();return-1<e.indexOf("ipad")||-1<e.indexOf("macintosh")&&"ontouchend"in document}},{key:"isDesktop",value:function(){return!e.isIpad()&&!e.isIphone()&&!e.getAndroidVersion()}},{key:"hasGetUserMedia",value:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}},{key:"isModernIphoneGPU",value:function(e){var t=new String(e.renderer).toLocaleLowerCase(),n=new RegExp("(apple a)([0-9]+)( gpu)"),r=new RegExp("(apple a)([0-9]+)(x gpu)"),i=new RegExp("(apple gpu)");return n.test(t)||r.test(t)||i.test(t)}},{key:"getIOSAGen",value:function(e){var t=new String(e.renderer).toLocaleLowerCase(),n=new RegExp("(apple a)([0-9]+)( gpu)"),r=new RegExp("(apple a)([0-9]+)(x gpu)");if(n.test(t)||r.test(t)){var i=t.split(/([0-9]+)/);return parseInt(i[1])}return-1}},{key:"isOldGTX",value:function(e){var t=new String(e.renderer).toLowerCase();if(-1<t.indexOf("geforce gtx")){var n=t.split("geforce gtx ")[1].split(" ");return parseInt(n[0])<1e3}return!1}}],null&&r(t.prototype,null),n&&r(t,n),e}();n.default=o},{}],20:[function(t,n,r){function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=24*Math.PI/180,s=16*Math.PI/180,u=function(){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mouseAmount=1,this.mouseAmp=1,this.cam=n,this.pos=this.cam.position.clone(),this.quat=this.cam.quaternion.clone(),window.cam=n,this.mouse=new e.Vector2,this.scrollingEnabled=!1,this.views=[{pos:new e.Vector3(0,1418420305220453e-30,23.16456150798765),quat:new e.Quaternion(-3061616997868383e-32,0,0,1)},{pos:new e.Vector3(-1.0971716170211945,2.0226607096486293,24.977827202784926),quat:new e.Quaternion(-.04233492915157715,-.2477754438493492,-.010838205780384285,.9678313987954983)},{pos:new e.Vector3(8.260067266147663,4.428105812335526,32.142800204931284),quat:new e.Quaternion(-.09030633827195628,.33831871151022813,.032637199211611706,.9361196653941161)}],this.pos.copy(this.views[0].pos),this.quat.copy(this.views[0].quat),n.position.copy(this.pos),n.quaternion.copy(this.quat),this.currentView=0}var n,r;return n=t,(r=[{key:"goToView",value:function(e){var t=0<arguments.length&&void 0!==e?e:0,n=Math.floor(t);if(n!==this.currentView&&!(n<0||n>this.views.length)){var r=this.views[n];i.a.to(this.pos,{duration:2,x:r.pos.x,y:r.pos.y,z:r.pos.z,ease:"power2.out"}),i.a.to(this.quat,{duration:2,x:r.quat.x,y:r.quat.y,z:r.quat.z,w:r.quat.w,ease:"power2.out"}),this.currentView=n}}},{key:"update",value:function(e){this.cam.position.copy(this.pos),this.cam.quaternion.copy(this.quat),this.mouse.x=e.x,this.mouse.y=e.y,this.mouse.multiplyScalar(this.mouseAmount)}},{key:"rotateContainerOnMouse",value:function(e){var t=-this.mouse.y*s*this.mouseAmp,n=this.mouse.x*a*this.mouseAmp;e.rotation.x+=.016*(t-e.rotation.x),e.rotation.y+=.016*(n-e.rotation.y)}}])&&o(n.prototype,r),t}();r.default=u},{}]},{},[15])}).call(this,n("i8eK"),n("fRV1"))},JG10:function(e,t,n){"use strict";var r=n("O2cr"),i=n("Rvax"),o=n("6wCR"),a=n.n(o),s=n("WrwZ");t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.timeline({paused:!0}),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.dom.body,n=Object(i.h)(".js-t-chars",t),o=Object(i.h)(".js-t-lines",t),u=Object(i.h)(".js-t-up",t),l=Object(i.h)(".js-t-words",t);if(n.length>0)for(var c=0;c<n.length;c++){var f=new a.a(n[c],{type:"words, chars",charsClass:"char"});e.fromTo(f.chars,{yPercent:75,rotationX:75,alpha:0},{yPercent:0,rotationX:0,alpha:1,stagger:.075,duration:2.75,ease:"expo"},0)}if(l.length>0)for(var h=0;h<l.length;h++){var p=new a.a(l[h],{type:"words",wordsClass:"word"});e.fromTo(p.words,{yPercent:75,rotationX:75,alpha:0},{yPercent:0,rotationX:0,alpha:1,stagger:.1,duration:2.75,ease:"expo"},"0.".concat(h))}if(o.length>0)for(var d=0;d<o.length;d++){var v=new a.a(o[d],{type:"lines",charsClass:"line"});e.fromTo(v.lines,{y:"3rem",alpha:0},{y:0,alpha:1,stagger:.1,duration:2.5,ease:"expo"},.55)}return u.length>0&&e.fromTo(u,{y:"3rem",alpha:0},{y:0,alpha:1,stagger:.1,duration:2.5,ease:"expo"},.65),e}},"O0I/":function(e,t,n){"use strict";var r=n("O2cr"),i=n("Rvax"),o=n("WrwZ");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t,n,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){var e=o.a.flags;e.dropdown?(e.dropdown=!1,e.locked=!1,i.close()):(e.dropdown=!0,e.locked=!0,i.open())},(n="toggle")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.el=document.querySelector(".js-dropdown"),this.btn=document.querySelector(".js-toggle-dropdown"),this.tl=null}var t,n,s;return t=e,(n=[{key:"init",value:function(){this.on(),this.setInitial()}},{key:"setInitial",value:function(){r.a.set(".js-dropdown",{yPercent:-100}),r.a.set(".js-dropdown-inner",{yPercent:85}),r.a.set(".js-dropdown-slide",{yPercent:-100}),r.a.set(".js-dropdown-fade",{alpha:0}),r.a.set(".js-dropdown-line",{scaleX:0})}},{key:"on",value:function(){Object(i.e)(this.btn,"a","click",this.toggle)}},{key:"open",value:function(){return this.tl&&this.tl.kill(),this.tl=r.a.timeline({force3D:!0}).set(".js-dropdown",{autoAlpha:1}).to([".js-dropdown",".js-dropdown-inner"],{yPercent:0,duration:1,ease:"expo.inOut"},0).to(".js-dropdown-slide",{yPercent:0,duration:1,stagger:.075,ease:"expo"},.5).to(".js-dropdown-fade",{alpha:.999,duration:1,stagger:.05,ease:"power1"},.5).to(".js-dropdown-line",{scaleX:.999,duration:1,ease:"expo.inOut"},.35).to(".js-burger__line-close",{scaleX:0,duration:.5,stagger:.05,ease:"expo.inOut"},0).to(".js-burger__line-open",{scaleX:1,duration:.75,ease:"expo.inOut"},.05).to(".js-burger__line-open-y",{scaleY:1,duration:.75,ease:"expo.inOut"},.1),this.tl}},{key:"close",value:function(){return this.tl&&this.tl.kill(),this.tl=r.a.timeline({force3D:!0}).to(".js-dropdown",{yPercent:-100,duration:1,ease:"expo.inOut"},0).to(".js-dropdown-inner",{yPercent:85,duration:1,ease:"expo.inOut"},0).to(".js-dropdown-slide",{yPercent:-100,duration:.85,ease:"expo.inOut"},0).to(".js-dropdown-fade",{alpha:0,stagger:-.05,ease:"linear"},0).to(".js-dropdown-line",{scaleX:0,duration:1,ease:"expo.inOut"},0).set(".js-dropdown",{autoAlpha:0}).to(".js-burger__line-open-y",{scaleY:0,duration:.5,ease:"expo.inOut"},0).to(".js-burger__line-open",{scaleX:0,duration:.5,ease:"expo.inOut"},.05).to(".js-burger__line-close",{scaleX:1,duration:.75,stagger:-.05,ease:"expo.inOut"},.1),this.tl}}])&&a(t.prototype,n),s&&a(t,s),e}();t.a=new s},Rvax:function(e,t,n){"use strict";var r=n("WrwZ"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return t.querySelector(e)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return t.querySelectorAll(e)};function a(e,t,n,r,i){var o=!0===i?{passive:!0}:{passive:!1};return e[("a"===t?"add":"remove")+"EventListener"](n,r,o)}var s=n("JG10"),u=n("O2cr");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"animate",(function(){t.target+=5,t.target=u.a.utils.clamp(0,t.max,t.target),t.current+=.1*(t.target-t.current),t.currentRounded=Math.round(100*t.current)/100,u.a.set(".js-loader-circle",{drawSVG:"".concat(t.currentRounded,"%")}),t.currentRounded<=99.5?t.goRaf():t.cancelRaf()})),c(this,"getProgress",(function(e,t){return e/t*100})),this.promises=[],this.el=null,this.target=0,this.current=0,this.currentRounded=0,this.max=0,this.raf=void 0}var t,n,i;return t=e,(n=[{key:"load",value:function(e){var t=this,n=e.el,i=void 0===n?r.a.dom.body:n,o=e.progress,a=void 0!==o&&o;return this.el=i,this.addMedia(),this.loader=new Promise((function(e){a?t.progressPromise(t.promises).then((function(){t.promises=[],e()})):Promise.all(t.promises).then((function(){t.promises=[],e()}))}))}},{key:"add",value:function(e){this.promises.push(e)}},{key:"addMedia",value:function(){for(var e=this,t=o("img",this.el),n=function(n){e.promises.push(new Promise((function(e){var r=new Image;a(r,"a","load",e),a(r,"a","error",e),r.src=t[n].src})))},r=0;r<t.length;r++)n(r)}},{key:"goRaf",value:function(){this.raf=requestAnimationFrame(this.animate)}},{key:"cancelRaf",value:function(){cancelAnimationFrame(this.raf);var e=Object(s.a)();this.tl=u.a.timeline({onComplete:function(){return e.play()}}).fromTo(".js-loader-circle",{drawSVG:"0% 100%"},{drawSVG:"100% 100%",duration:.5,ease:"power3.inOut"}).to([".js-loader-mark"],{autoAlpha:0,ease:"power1",duration:.5},0).to([".js-loader"],{autoAlpha:0,ease:"power1",duration:.4},.5)}},{key:"progressPromise",value:function(e,t){var n=this,r=0;return this.goRaf(),Promise.all(e.map((function(t){return t.then((function(){r++,n.max=n.getProgress(r,e.length)})).catch((function(e){console.log(e)}))})))}}])&&l(t.prototype,n),i&&l(t,i),e}());function h(e,t,n){return e*(1-n)+t*n}function p(e){for(var t=[].slice.call(arguments,1),n=0;n<t.length;n++){var r=t[n];e[r]=d(e[r],e)}}function d(e,t){return function(){return e.apply(t,arguments)}}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=v(o("img",e)).map((function(e){return e.src}));return Promise.all(t.map(y))}var y=function(e){return new Promise((function(t){var n=new Image;n.onload=function(){return t({path:e,status:"ok"})},n.onerror=function(){return t({path:e,status:"error"})},n.src=e}))};n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return f}))},ScBi:function(e,t,n){"use strict";var r=n("TOxT"),i=new(n.n(r).a),o=n("baPW"),a=n.n(o),s=n("WrwZ");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isRunning=!1,this.el=document.getElementById("pe")}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.isRunning=!1,e.togglePointers("none")}),300),this.isRunning||(this.isRunning=!0,this.togglePointers("all"))}},{key:"togglePointers",value:function(e){this.el.style.pointerEvents=e}}])&&u(t.prototype,n),r&&u(t,r),e}()),c=n("Rvax");function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(c.b)(this,"onEvent","onScroll","setScrollBounds"),this.init()}var t,n,r;return t=e,(n=[{key:"setScrollBounds",value:function(){var e=s.a.dom,t=s.a.bounds,n=e.scroll.getBoundingClientRect().height;t.scroll=n>t.wh?n-t.wh:0}},{key:"onEvent",value:function(e){s.a.flags.locked||"projects"===s.a.page.current&&s.a.isDesktop||(l.run(),i.emit("scroll",{y:-1*e.deltaY}))}},{key:"on",value:function(){this.vs=new a.a({mouseMultiplier:s.a.flags.windows?1.1:.45,touchMultiplier:3,firefoxMultiplier:s.a.flags.windows?40:90,passive:!0}),this.vs.on(this.onEvent)}},{key:"init",value:function(){this.on()}}])&&f(t.prototype,n),r&&f(t,r),e}()),p=n("O2cr");function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"tick",(function(){var e=s.a.flags;t.current=Object(c.d)(t.current,t.target,t.ease),t.currentRounded=Math.round(100*t.current)/100,!e.scrolled&&t.currentRounded>0&&(e.scrolled=!0),i.emit("tick",{target:t.target,current:t.currentRounded,mouse:t.mouse})})),v(this,"scrollTo",(function(e){p.a.to(t,{target:e,ease:"power1.in",duration:1})})),v(this,"onScroll",(function(e){var n=e.y;s.a.flags.locked||"projects"===s.a.page.current&&s.a.isDesktop||(t.target+=n,t.clampTarget())})),v(this,"onMove",(function(e){var n=e.y,r=e.x,i=e.glY,o=e.glX,a=e.target;t.mouse.x=r,t.mouse.y=n,t.mouse.glY=i,t.mouse.glX=o,t.mouse.target=a})),this.target=0,this.current=0,this.currentRounded=0,this.mouse={x:0,y:0,target:null,glX:0,glY:0},this.ease=.115,this.init()}var t,n,r;return t=e,(n=[{key:"clampTarget",value:function(){this.target=Math.min(Math.max(this.target,0),s.a.bounds.scroll)}},{key:"reset",value:function(){this.target=this.current=this.currentRounded=0}},{key:"resize",value:function(){this.current=this.currentRounded=this.target}},{key:"on",value:function(){p.a.ticker.fps(-1),p.a.ticker.add(this.tick),i.on("scroll",this.onScroll),i.on("mousemove",this.onMove)}},{key:"init",value:function(){this.on()}}])&&d(t.prototype,n),r&&d(t,r),e}()),y=n("E/ZA"),g=n.n(y);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(c.b)(this,"onResize"),this.init()}var t,n,r;return t=e,(n=[{key:"onResize",value:function(){var e=s.a.flags,t=s.a.bounds;e.resize=!0,t.ww=window.innerWidth,t.wh=window.innerHeight,h.setScrollBounds(),m.clampTarget(),m.resize(),this.setAspect(),i.emit("resize"),e.resize=!1}},{key:"setAspect",value:function(){var e=s.a.bounds,t=s.a.dom,n=s.a.flags;e.wh<=e.ww?(t.body.classList.remove("is-portrait"),t.body.classList.add("is-landscape"),n.landscape=!0):(t.body.classList.remove("is-landscape"),t.body.classList.add("is-portrait"),n.landscape=!1)}},{key:"on",value:function(){Object(c.e)(window,"a","resize",g()(this.onResize,200))}},{key:"init",value:function(){this.setAspect(),this.on()}}])&&b(t.prototype,n),r&&b(t,r),e}());function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(c.b)(this,"onOrentationChange"),this.init()}var t,n,r;return t=e,(n=[{key:"onOrientationChange",value:function(){var e=s.a.dom;e.body.classList.contains("is-orientation-changed")?e.body.classList.remove("is-orientation-changed"):e.body.classList.add("is-orientation-changed"),i.emit("orientationchange")}},{key:"on",value:function(){Object(c.e)(window,"orientationchange",this.onOrientationChange)}},{key:"init",value:function(){this.on()}}])&&w(t.prototype,n),r&&w(t,r),e}());function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"onMove",(function(e){var n=t.getPos(e),r=n.x,o=n.y,a=n.glX,s=n.glY,u=n.target;i.emit("mousemove",{x:r,y:o,glX:a,glY:s,target:u,e:e})})),E(this,"onDown",(function(e){var n=t.getPos(e),r=n.x,o=n.y,a=n.glX,s=n.glY,u=n.target;t.state.on=r,i.emit("mousedown",{x:r,y:o,glX:a,glY:s,target:u})})),E(this,"onUp",(function(e){var n=t.getPos(e),r=n.x,o=n.glX,a=n.target,s=t.state;s.off=r;var u=Math.abs(s.on-s.off)>10;i.emit("mouseup",{x:r,glX:o,target:a,isClick:u})})),E(this,"onClick",(function(e){i.emit("click",e)})),this.state={on:0,off:0,coords:{x:0,y:0}},this.events={move:s.a.isDevice?"touchmove":"mousemove",down:s.a.isDevice?"touchstart":"mousedown",up:s.a.isDevice?"touchend":"mouseup"},this.on()}var t,n,r;return t=e,(n=[{key:"on",value:function(){var e=this.events,t=e.move,n=e.down,r=e.up;Object(c.e)(window,"a",t,this.onMove),Object(c.e)(window,"a",n,this.onDown),Object(c.e)(window,"a",r,this.onUp),Object(c.e)(window,"a","click",this.onClick)}},{key:"getPos",value:function(e){var t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY,r=1-2*n/s.a.bounds.wh;return{x:t,y:n,glX:2*t/s.a.bounds.ww-1,glY:r,target:e.target}}}])&&x(t.prototype,n),r&&x(t,r),e}());n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return D}))},Sm8t:function(e,t,n){},WrwZ:function(e,t,n){"use strict";var r=n("YH1O"),i=n.n(r),o={dom:{doc:document.documentElement,body:document.body,scroll:document.querySelector("[data-smooth]")},bounds:{ww:window.innerWidth,wh:window.innerHeight,scroll:0},flags:{home:!1,locked:!1,dropdown:!1,resize:!1,windows:-1!==["Win32","Win64","Windows","WinCE"].indexOf(window.navigator.platform)},page:{current:null,last:null},color:{default:!0,pink:"#f1bda5",blue:"#0053ff"}};Object.assign(o,i.a.getInfos()),o.flags.smooth=o.isDesktop,t.a=o},XaR8:function(e,t,n){"use strict";var r=n("O2cr"),i=n("WrwZ"),o=n("ScBi"),a=n("Rvax"),s=n("t36m"),u=n("cuco");n("AQNj");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=new(function(e){function t(e,n,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?f(e):t}(this,d(t).call(this,e,n,o)),v(f(a),"run",(function(e){var t=e.target,n=e.current,r=e.mouse,o=a.state,s=u.a.planesGroup.children;if(s&&!i.a.isDevice){var l=.005*(t-n);o.mouse.x+=.1*(r.x-o.mouse.x),o.mouse.y+=.1*(r.y-o.mouse.y);for(var c=[.001*(r.x-o.mouse.x),.001*(r.y-o.mouse.y)],f=0;f<s.length;f++){var h=s[f];h.mouse&&(h.locked||h.mouse)?h.mouse&&h.visible&&(h.updatePosition(o.mouse.y,o.mouse.x),h.material.uniforms.uVelo.value=c,h.rotation.y=1.5*c[0],h.rotation.x=1.5*c[0]):h.updateY(n,l)}}a.update(),a.render(),!i.a.isDevice&&a.mouse.set(.75*r.glX,.75*r.glY),a.renderer.autoClear=!1})),v(f(a),"onDown",(function(e){var t=e.target;if(!t.closest("a")&&!t.closest(".js-draggable-area")){var n=a.state,i=n.flags,o=n.tl;i.soaring||(i.soaring=!0,o.soaring&&o.soaring.kill(),o.soaring=r.a.timeline({delay:.5}).add((function(){a.soarMode()})))}})),v(f(a),"onUp",(function(){var e=a.state,t=e.flags,n=e.tl;t.soaring&&(t.soaring=!1,n.soaring&&n.soaring.kill(),a.flapMode())})),v(f(a),"onResize",(function(){u.a.resize(),p(d(t.prototype),"resize",f(a)).call(f(a))})),a.state={target:0,current:0,velo:0,mouse:{x:0,y:0},flags:{soaring:!1},tl:{soaring:null}},a}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,glLayer),n=t,(a=[{key:"init",value:function(){this.addEvents()}},{key:"addEvents",value:function(){o.a.on("tick",this.run),o.a.on("resize",this.onResize),o.a.on("mousedown",this.onDown),o.a.on("mouseup",this.onUp)}}])&&c(n.prototype,a),s&&c(n,s),t}())(Object(a.g)(".js-gl"),{glbPath:"/wp-content/themes/nightingale/static/models/mesh.glb",manualUpdate:!0,maxPR:1},(function(){s.c.update()}));t.a=m},cuco:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"Plane",(function(){return F})),n.d(r,"Approach",(function(){return B})),n.d(r,"Studios",(function(){return Y})),n.d(r,"Hover",(function(){return re})),n.d(r,"Projects",(function(){return ve})),n.d(r,"FlerpyPlane",(function(){return Oe}));var i=n("O2cr"),o=n("i8eK"),a=n("WrwZ"),s=n("XaR8"),u=n("ScBi");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.args=e,this.el=this.args.el,this.name=this.args.name,this.pid=this.el.closest("[data-pid]")&&this.el.closest("[data-pid]").dataset.pid,this.locked=void 0!==this.el.dataset.lock,this.fade=void 0!==this.el.dataset.fade,this.loader=new o.TextureLoader,this.loader.crossOrigin="",this.resize()}},{key:"resize",value:function(){var e=this.el.getBoundingClientRect();this.bounds={left:e.left,top:e.top+(this.el.closest("[data-smooth-item]")?u.b.currentRounded:0),width:e.width,height:e.height},this.updateSize(),this.updatePosition()}},{key:"calculateUnitSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.position.z,t=s.a.camera.fov*Math.PI/180,n=2*Math.tan(t/2)*e,r=n*s.a.camera.aspect;return{width:r,height:n}}},{key:"updateSize",value:function(){this.camUnit=this.calculateUnitSize(s.a.camera.position.z-this.position.z);var e=a.a.bounds,t=e.ww,n=e.wh,r=this.bounds.width/t,i=this.bounds.height/n;r&&i&&(this.scale.x=this.camUnit.width*r,this.scale.y=this.camUnit.height*i)}},{key:"updateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=a.a.bounds.wh,n=this.bounds,r=n.top,i=n.height;this.position.y=this.camUnit.height/2-this.scale.y/2,this.mouse?this.position.y-=(e-i/2)/t*this.camUnit.height:this.position.y-=(r-e)/t*this.camUnit.height}},{key:"updateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=a.a.bounds.ww,n=this.bounds,r=n.left,i=n.width;this.position.x=-this.camUnit.width/2+this.scale.x/2,this.mouse?this.position.x+=(e-i/2)/t*this.camUnit.width:this.position.x+=(r+e)/t*this.camUnit.width}},{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.updateY(e),this.updateX(t)}},{key:"destroy",value:function(){this.parent&&this.parent.remove(this),this.visible=!1}}])&&c(n.prototype,r),i&&c(n,i),t}(o.Object3D),v="\nprecision highp float;\n\nvarying vec2 vUv;\n\nvoid main(){\n  vec3 pos = position;\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n}\n",m="\nprecision highp float;\n\nuniform sampler2D uTexture;\n\nuniform float uAlpha;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 texture = texture2D(uTexture, uv);\n  \n  gl_FragColor = texture * uAlpha;\n}\n",y="\nprecision highp float;\n\nvarying vec2 vUv;\nuniform float uProgress2;\nuniform float uTime;\n\nvoid main(){\n  vec3 pos = position;\n\n  float speed = 10.0;\n  float frequency = 7.5;\n  float amplitude = 1.;\n\n  vec3 newPos = position.xyz;\n  newPos.z += sin(newPos.x * frequency + uTime * speed) * amplitude * uProgress2;\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPos,1.);\n}\n",g="\nprecision highp float;\n\n".concat("\nvec2 backgroundCoverUv( vec2 screenSize, vec2 imageSize, vec2 uv ) {\n  float screenRatio = screenSize.x / screenSize.y;\n  float imageRatio = imageSize.x / imageSize.y;\n  vec2 newSize = screenRatio < imageRatio \n      ? vec2(imageSize.x * (screenSize.y / imageSize.y), screenSize.y)\n      : vec2(screenSize.x, imageSize.y * (screenSize.x / imageSize.x));\n  vec2 newOffset = (screenRatio < imageRatio \n      ? vec2((newSize.x - screenSize.x) / 2.0, 0.0) \n      : vec2(0.0, (newSize.y - screenSize.y) / 2.0)) / newSize;\n  return uv * screenSize / newSize + newOffset;\n}\n","\n\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\n\nuniform float uVelo;\nuniform float uAlpha;\nuniform float uProgress;\n\nuniform vec2 uMeshSize;\nuniform vec2 uImageSize;\n\nvarying vec2 vUv;\n\nfloat amplitude = 50.;\nfloat speed = 20.;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec2 cUv = backgroundCoverUv(uMeshSize, uImageSize, uv);\n\n  float x = uProgress;\n  x=smoothstep(.0,1.0,(x*2.0+cUv.x-1.0));\n\n  vec4 texture = texture2D(uTexture, cUv-.5 *(1.-x)+.5);\n  vec4 texture2 = texture2D(uTexture2, cUv-.5*x+.5);\n  vec4 color = mix(texture, texture2, clamp(0., 1., x));\n\n  gl_FragColor = color * uAlpha;\n}\n"),b=n("Rvax");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=new o.PlaneBufferGeometry(1,1,1,1),P=new o.ShaderMaterial({transparent:!0,fragmentShader:"\n    precision highp float;\n\n    uniform sampler2D uTexture;\n    \n    uniform float uAlpha;\n    uniform float uVelo;\n    \n    varying vec2 vUv;\n    \n    void main() {\n      vec2 uv = vUv;\n    \n      vec4 texture = texture2D(uTexture, uv);\n\n      uv.y -= 0.1 * uVelo;\n      if(uv.y < 1.) texture.g = texture2D(uTexture, uv).g;\n      \n      uv.y -= 0.15 * uVelo;\n      if(uv.y < 1.) texture.b = texture2D(uTexture, uv).b;\n      \n      gl_FragColor = texture * uAlpha;\n    }\n  ",vertexShader:v}),F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,O(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var n=this;E(O(t.prototype),"init",this).call(this,e),this.geometry=C,this.material=P.clone(),this.material.uniforms={uTime:{value:0},uTexture:{value:null},uVelo:{value:0},uAlpha:{value:1}},this.img=Object(b.g)("img",this.el),this.img&&(this.texture=this.loader.load(this.img.currentSrc||this.img.src,(function(e){e.minFilter=o.LinearFilter,e.generateMipmaps=!1,n.fade&&i.a.to(n.material.uniforms.uAlpha,{value:1,duration:.5,ease:"power1"})}))),this.material.uniforms={uTime:{value:0},uTexture:{value:this.texture},uVelo:{value:0},uAlpha:{value:this.fade?0:1}},this.mesh=new o.Mesh(this.geometry,this.material),this.mesh.renderOrder=3,this.add(this.mesh),Pe.planesGroup.add(this),Pe.planes[this.name]=this}},{key:"updateY",value:function(e,n){E(O(t.prototype),"updateY",this).call(this,e),this.material&&(this.material.uniforms.uVelo.value=.1*n)}}])&&w(n.prototype,r),a&&w(n,a),t}(d);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=new o.CylinderBufferGeometry(.375,.375,.7,30,1,!0),B=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=function(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?j(e):t}(this,(e=A(t)).call.apply(e,[this].concat(o))),M(j(n),"onDown",(function(e){var t=e.glX;e.target.closest(".js-approach")&&(n.state.dragging=!0,n.state.on=t)})),M(j(n),"onMove",(function(e){var t=e.glX,r=n.state;r.dragging&&(r.target=r.off+2*(t-r.on))})),M(j(n),"onUp",(function(){var e=n.state;e.dragging&&(e.dragging=!1);var t=i.a.utils.wrap(e.max,0,e.target),r=i.a.utils.snap(n.snapPoints,t)-t;e.target+=r,e.off=e.target})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var n=this;k(A(t.prototype),"init",this).call(this,e),this.geometry=L,this.matOuter=new o.ShaderMaterial({transparent:!0,fragmentShader:m,vertexShader:v,side:o.FrontSide,uniforms:{uTime:{value:0},uTexture:{value:null},uVelo:{value:0},uAlpha:{value:1}}}),this.matInner=new o.ShaderMaterial({transparent:!0,fragmentShader:m,vertexShader:v,side:o.BackSide,uniforms:{uTime:{value:0},uTexture:{value:null},uVelo:{value:0},uAlpha:{value:1}}}),this.textures=[],this.images=Object(b.h)("img",this.el);for(var r=function(e){var t=n.images[e];n.loader.load(t.currentSrc||t.src,(function(t){t.minFilter=o.LinearFilter,t.generateMipmaps=!1,n.textures[e]=t,0===e&&(n.matOuter.uniforms.uTexture.value=t),1===e&&(n.matInner.uniforms.uTexture.value=t)}))},i=0;i<this.images.length;i++)r(i);this.meshOuter=new o.Mesh(this.geometry,this.matOuter),this.meshInner=new o.Mesh(this.geometry,this.matInner),this.meshOuter.renderOrder=this.meshInner.renderOrder=3,this.add(this.meshOuter),this.add(this.meshInner),this.scale.z=this.scale.x,Pe.planesGroup.add(this),Pe.planes[this.name]=this,this.onAdd()}},{key:"addEvents",value:function(){u.a.on("mousedown",this.onDown),u.a.on("mousemove",this.onMove),u.a.on("mouseup",this.onUp)}},{key:"onAdd",value:function(){this.state={on:0,off:0,max:-(2*Math.PI-2*Math.PI/6),target:0,targetClamped:0,current:0,dragging:!1},this.snapPoints=[];for(var e=0;e<6;e++)this.snapPoints.push(this.state.max/5*e);this.tl=i.a.timeline({paused:!0}).fromTo(".js-approach-pagination",{yPercent:0},{yPercent:-(100-100/6),duration:1,ease:"linear"}),this.addEvents()}},{key:"updateY",value:function(e){if(k(A(t.prototype),"updateY",this).call(this,e),this.state){var n=this.state;n.current+=.075*(n.target-n.current),this.rotation.y=n.current,this.tl&&this.tl.progress(n.current/n.max)}}},{key:"removeEvents",value:function(){u.a.off("mousedown",this.onDown),u.a.off("mousemove",this.onMove),u.a.off("mouseup",this.onUp)}},{key:"destroy",value:function(){k(A(t.prototype),"destroy",this).call(this),this.removeEvents(),this.state=null,this.snapPoints=null,this.tl.kill()}}])&&_(n.prototype,r),a&&_(n,a),t}(d);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=new o.PlaneBufferGeometry(1,1,25,25),X=new o.ShaderMaterial({transparent:!0,fragmentShader:g,vertexShader:y}),Y=function(e){function t(){var e,n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=function(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?U(e):t}(this,(e=N(t)).call.apply(e,[this].concat(l))),r=U(n),a=function(){var e=n.material.uniforms,t=e.uProgress,r=e.uProgress2,o=e.uTime;n.tl&&n.tl.kill(),n.tl=i.a.timeline().to(t,{value:n.clicked?0:1,duration:2,ease:"expo",onUpdate:function(){o.value=s.a.clock.getElapsedTime()}}).to(r,{value:1,duration:.25,ease:"power1.in"},0).to(r,{value:0,duration:1,ease:"power1.out"},.5),n.clicked=!n.clicked},(o="toggle")in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var n=this;if(G(N(t.prototype),"init",this).call(this,e),this.geometry=H,this.material=X.clone(),this.textures=[],this.material.uniforms={uTime:{value:0},uTexture:{value:this.textures[0]},uTexture2:{value:null},uImageSize:{value:new o.Vector2(0,0)},uMeshSize:{value:new o.Vector2(0,0)},uProgress:{value:0},uProgress2:{value:0},uVelo:{value:0},uAlpha:{value:1}},this.clicked=!1,this.images=Object(b.h)("img",this.el),this.images)for(var r=function(e){var t=n.images[e];n.loader.load(t.currentSrc||t.src,(function(t){if(void 0!==n.el.dataset.nop2&&(t.minFilter=o.LinearFilter,t.generateMipmaps=!1),n.textures[e]=t,0===e){var r=t.image,i=r.naturalHeight,a=r.naturalWidth,s=n.bounds,u=s.width,l=s.height;n.material.uniforms.uImageSize.value=[a,i],n.material.uniforms.uMeshSize.value=[u,l],n.material.uniforms.uTexture.value=t}1===e&&(n.material.uniforms.uTexture2.value=t)}))},i=0;i<this.images.length;i++)r(i);this.mesh=new o.Mesh(this.geometry,this.material),this.mesh.renderOrder=3,this.add(this.mesh),Pe.planesGroup.add(this),Pe.planes[this.name]=this,this.onAdd()}},{key:"onAdd",value:function(){u.a.on("click",".js-toggle-studios",this.toggle)}},{key:"destroy",value:function(){G(N(t.prototype),"destroy",this).call(this),u.a.off("click",".js-toggle-studios",this.toggle)}}])&&z(n.prototype,r),a&&z(n,a),t}(d);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=new o.PlaneBufferGeometry(1,1,1,1),ne=new o.ShaderMaterial({transparent:!0,fragmentShader:"\nprecision highp float;\n\nuniform sampler2D uTexture;\n\nuniform float uAlpha;\nuniform vec2 uVelo;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 texture = texture2D(uTexture, uv);\n\n  uv.x += 0.35 * uVelo.x;\n  if(uv.x < 1.) texture.g = texture2D(uTexture, uv).g;\n  \n  uv.x += 0.25 * uVelo.x;\n  if(uv.x < 1.) texture.b = texture2D(uTexture, uv).b;\n\n  uv.y += 0.35 * uVelo.y;\n  if(uv.y < 1.) texture.g = texture2D(uTexture, uv).g;\n  \n  uv.y += 0.35 * uVelo.y;\n  if(uv.y < 1.) texture.b = texture2D(uTexture, uv).b;\n  \n  gl_FragColor = texture * uAlpha;\n}\n",vertexShader:v}),re=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=function(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?Z(e):t}(this,(e=Q(t)).call.apply(e,[this].concat(o))),ee(Z(n),"ui",{}),ee(Z(n),"enter",(function(e){var t=e.target,r=n.material.uniforms;n.visible=!0,r.uTexture.value=n.textures[n.ui.texts.indexOf(t)],n.tl&&n.tl.kill(),n.tl=i.a.to(r.uAlpha,{value:1,duration:.35,ease:"power1"})})),ee(Z(n),"leave",(function(){var e=n.material.uniforms;n.tl&&n.tl.kill(),n.tl=i.a.to(e.uAlpha,{value:0,ease:"power1",duration:.35,onComplete:function(){n.visible=!1}})})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var n=this;if(J(Q(t.prototype),"init",this).call(this,e),this.geometry=te,this.material=ne.clone(),this.mouse=!0,this.visible=!1,this.textures=[],this.material.uniforms={uTexture:{value:this.textures[0]},uVelo:{value:new o.Vector2(0,0)},uAlpha:{value:1}},this.images=Object(b.h)("img",this.el),this.images)for(var r=function(e){var t=n.images[e];n.loader.load(t.currentSrc||t.src,(function(t){void 0!==n.el.dataset.nop2&&(t.minFilter=o.LinearFilter,t.generateMipmaps=!1),n.textures[e]=t,0===e&&(n.material.uniforms.uTexture.value=t),s.a.renderer.initTexture(t)}))},i=0;i<this.images.length;i++)r(i);this.mesh=new o.Mesh(this.geometry,this.material),this.mesh.renderOrder=3,this.add(this.mesh),Pe.planesGroup.add(this),Pe.planes[this.name]=this,this.onAdd()}},{key:"onAdd",value:function(){this.material.uniforms.uAlpha.value=0,this.ui.texts=K(Object(b.h)(".js-h-item")),u.a.on("mouseenter",this.ui.texts,this.enter),u.a.on("mouseleave",this.ui.texts,this.leave)}},{key:"destroy",value:function(){J(Q(t.prototype),"destroy",this).call(this),u.a.off("mouseenter",Object(b.h)(".js-h-item"),this.enter),u.a.off("mouseleave",Object(b.h)(".js-h-item"),this.leave),this.ui.texts=null}}])&&W(n.prototype,r),a&&W(n,a),t}(d),ie=n("XORh"),oe=n.n(ie);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t,n){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=new o.PlaneBufferGeometry(1,1,25,25),de=new o.ShaderMaterial({transparent:!0,fragmentShader:g,vertexShader:y}),ve=function(e){function t(){var e,n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=function(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?le(e):t}(this,(e=fe(t)).call.apply(e,[this].concat(l))),r=le(n),a=function(e){var t=e.target;n.last=n.current,n.current=n.elems.indexOf(t);var r=n.material.uniforms;r.uTexture.value=n.textures[n.last],r.uTexture2.value=n.textures[n.current],r.uProgress.value=0,n.tl&&n.tl.kill(),n.tl=i.a.timeline().to(r.uProgress,{value:1,duration:1.75,ease:"expo",onUpdate:function(){r.uTime.value=s.a.clock.elapsedTime}}).to(r.uProgress2,{value:1,duration:.15,ease:"power1.in"},0).to(r.uProgress2,{value:0,duration:.85,ease:"power1.out"},.25),n.tickers&&(n.tickers[n.last].classList.remove("is-active"),n.tickers[n.current].classList.add("is-active"),n.tl.to(".js-work-tickers",{yPercent:-100/n.elems.length*n.current,duration:1,ease:"expo"},0))},(o="toggle")in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var n=this;if(ce(fe(t.prototype),"init",this).call(this,e),this.geometry=pe,this.material=de.clone(),this.textures=[],this.images=Object(b.h)("img",this.el),this.material.uniforms={uTime:{value:0},uTexture:{value:this.textures[0]},uTexture2:{value:null},uProgress:{value:0},uProgress2:{value:0},uImageSize:{value:new o.Vector2(0,0)},uMeshSize:{value:new o.Vector2(0,0)},uAlpha:{value:1}},this.last=0,this.current=0,this.images)for(var r=function(e){var t=n.images[e];n.loader.load(t.currentSrc||t.src,(function(t){if(t.minFilter=o.LinearFilter,t.generateMipmaps=!1,n.textures[e]=t,0===e){var r=t.image,i=r.naturalHeight,a=r.naturalWidth,s=n.bounds,u=s.width,l=s.height;n.material.uniforms.uTexture.value=t,n.material.uniforms.uImageSize.value=[a,i],n.material.uniforms.uMeshSize.value=[u,l]}1===e&&(n.material.uniforms.uTexture2.value=t)}))},i=0;i<this.images.length;i++)r(i);this.mesh=new o.Mesh(this.geometry,this.material),this.mesh.renderOrder=3,this.add(this.mesh),Pe.planesGroup.add(this),Pe.planes[this.name]=this,this.onAdd()}},{key:"onAdd",value:function(){"home"===a.a.page.current&&(this.tickers=Object(b.h)(".js-work-ticker")),this.elems=se(Object(b.h)(".js-project")),u.a.on("mouseenter",this.elems,oe()(this.toggle,400))}},{key:"destroy",value:function(){ce(fe(t.prototype),"destroy",this).call(this),u.a.off("mouseenter",se(Object(b.h)(".js-project")),oe()(this.toggle,400)),this.elems=null,this.tickers&&(this.tickers=null)}}])&&ue(n.prototype,r),l&&ue(n,l),t}(d);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e,t,n){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=De(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=new o.PlaneBufferGeometry(1,1,25,25),Ee=new o.ShaderMaterial({transparent:!0,fragmentShader:"\n    precision highp float;\n\n    uniform sampler2D uTexture;\n    \n    uniform float uAlpha;\n    uniform float uVelo;\n    \n    varying vec2 vUv;\n    \n    void main() {\n      vec2 uv = vUv;\n    \n      vec4 texture = texture2D(uTexture, uv);\n\n      uv.y -= 0.1 * uVelo;\n      if(uv.y < 1.) texture.g = texture2D(uTexture, uv).g;\n      \n      uv.y -= 0.15 * uVelo;\n      if(uv.y < 1.) texture.b = texture2D(uTexture, uv).b;\n      \n      gl_FragColor = texture * uAlpha;\n    }\n  ",vertexShader:"\n  precision highp float;\n  \n  varying vec2 vUv;\n  uniform float uProgress;\n  uniform float uTime;\n  \n  void main(){\n    vec3 pos = position;\n  \n    float speed = 10.0;\n    float frequency = 7.5;\n    float amplitude = 1.;\n  \n    vec3 newPos = position.xyz;\n    newPos.z += sin(newPos.x * frequency + uTime * speed) * amplitude * uProgress;\n  \n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(newPos,1.);\n  }\n  "}),Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,De(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var n=this;be(De(t.prototype),"init",this).call(this,e),this.geometry=xe,this.material=Ee.clone(),this.img=Object(b.g)("img",this.el),this.img&&(this.texture=this.loader.load(this.img.currentSrc||this.img.src,(function(e){e.minFilter=o.LinearFilter,e.generateMipmaps=!1,n.timeline()}))),this.material.uniforms={uTime:{value:0},uTexture:{value:this.texture},uProgress:{value:0},uVelo:{value:0},uAlpha:{value:this.fade?0:1}},this.mesh=new o.Mesh(this.geometry,this.material),this.mesh.renderOrder=3,this.add(this.mesh),Pe.planesGroup.add(this),Pe.planes[this.name]=this}},{key:"onAdd",value:function(){this.timeline()}},{key:"timeline",value:function(){var e=this.material.uniforms,t=e.uTime,n=e.uProgress,r=e.uAlpha;return i.a.timeline({onUpdate:function(){t.value=s.a.clock.elapsedTime}}).to(r,{value:1,duration:.5,ease:"power1"},0).from(n,{value:1.5,duration:1.25,ease:"power1.out"},0)}},{key:"updateY",value:function(e,n){be(De(t.prototype),"updateY",this).call(this,e),this.material&&(this.material.uniforms.uVelo.value=.1*n)}}])&&ye(n.prototype,r),a&&ye(n,a),t}(d);function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.planes={},this.planesGroup=new o.Group}var t,n,s;return t=e,(n=[{key:"fromDom",value:function(e){if(!a.a.isDevice){var t=e.dataset.glId,n=e.dataset.glComponent,i=this.planes[t];i?(this.planesGroup.add(i),i.mouse||(i.visible=!0,this.fadeIn(i)),void 0!==i.onAdd&&i.onAdd()):n?(new r[n]).init({el:e,name:t}):(new F).init({el:e,name:t})}}},{key:"fadeIn",value:function(e){a.a.isDevice||e.material&&i.a.fromTo(e.material.uniforms.uAlpha,{value:0},{value:1,duration:.5,ease:"power1"})}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!a.a.isDevice)for(var t in this.planes)this.planes[t].resize(e)}},{key:"removePlanes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a.a.isDevice)for(var n in this.planes)this.remove(this.planes[n],e,t)}},{key:"remove",value:function(e,t,n){a.a.isDevice||t===e.pid&&(n&&e.material?i.a.to(e.material.uniforms.uAlpha,{value:0,duration:.5,ease:"power1",onComplete:function(){e.destroy()}}):e.destroy())}}])&&Se(t.prototype,n),s&&Se(t,s),e}(),Pe=t.a=new Ce},t36m:function(e,t,n){"use strict";var r=n("ScBi");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"function"==typeof window.fetch&&r.a.delegate("click",".js-almond",(function(e){e.preventDefault(),t.clickHandler(e)}))}var t,n,o;return t=e,(n=[{key:"load",value:function(e,t,n){var i=this;fetch(e).then((function(t){return t.ok?t.text():(i.navigationFallback(e),"")})).then((function(o){var a=(new DOMParser).parseFromString(o,"text/html"),s=document.querySelector(n),u=a.querySelector(t),l=document.createDocumentFragment();null===u&&i.navigationFallback(e);for(var c=0;c<u.childNodes.length;c++)l.appendChild(u.childNodes[c].cloneNode(!0));s.parentNode.replaceChild(l,s),r.a.emit("almond-completed"),r.c.onResize()})).catch((function(t){i.navigationFallback(e)}))}},{key:"clickHandler",value:function(e){var t=e.delegatedTarget,n=t.href,r=t.dataset.almondFrom||".js-almond-from",i=t.dataset.almondTo||".js-almond-to";if(void 0!==n){if(null===document.querySelector(i))return console.error("This element does not have a valid data-almond-to. Gracefully degrading to normal link behaviour",t),void this.navigationFallback(n);this.replaceText("Loading...",t),t.disabled=!0,t.style.pointerEvents="none",this.load(n,r,i)}}},{key:"replaceText",value:function(e,t){var n;if(1===t.nodeType){if(t=t.firstChild)do{n=t.nextSibling,this.replaceText(e,t)}while(t=n)}else 3===t.nodeType&&!0===/[^\t\n\r ]/.test(t.textContent)&&(t.textContent=e)}},{key:"navigationFallback",value:function(e){window.location.href=e}},{key:"destroy",value:function(){r.a.off("click",".js-almond")}}])&&i(t.prototype,n),o&&i(t,o),e}(),a=n("WrwZ"),s=n("Rvax");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(s.b)(this,"run","resize"),this.el=a.a.dom.scroll||Object(s.g)("[data-smooth]"),this.elems=null,this.current=0,this.threshold=100,this.sections=null}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t){this.elems=e||Object(s.h)("[data-smooth-item]"),this.getSections(),this.on(),t&&this.preload()}},{key:"update",value:function(e,t){this.elems=e||Object(s.h)("[data-smooth-item]"),this.getSections(),t&&this.preload()}},{key:"preload",value:function(){var e=this;Object(s.f)().then((function(){r.d.setScrollBounds(),e.resize()}))}},{key:"clean",value:function(){this.elems=this.sections=null}},{key:"run",value:function(e){var t=e.current;this.current=t,this.transformSections()}},{key:"transformSections",value:function(){if(this.sections)for(var e=a.a.flags.resize,t=0;t<this.sections.length;t++){var n=this.sections[t],r=this.isVisible(n),i=r.isVisible,o=r.transform;i||e?(n.out&&(n.out=!1),this.updateSection(n,o)):n.out||(n.out=!0,this.updateSection(n,o))}}},{key:"isVisible",value:function(e){var t=e.top,n=e.bottom,r=e.offset,i=e.speed,o=e.parent,s=a.a.bounds.wh,u=o&&o.transform||0,l=this.current*i,c=l-r-u,f=n-l,h=t-l<this.threshold+s&&f>-this.threshold;return{isVisible:h,transform:c}}},{key:"updateSection",value:function(e,t){e.transform=t,e.el.style.transform="translate3d(0, ".concat(-t,"px, 0)"),e.rotate&&(e.rotate.style.transform="rotate(".concat(.5*t,"deg)"))}},{key:"getVars",value:function(e,t){var n=a.a.bounds.wh,r=e.getBoundingClientRect(),i=n/2-r.height/2,o=r.top<n?0:(r.top-i)*t-(r.top-i);return{top:r.top+o,bottom:r.bottom+o,offset:o}}},{key:"getSections",value:function(){var e=this;this.elems&&(this.sections=null,this.sections=[],this.elems.forEach((function(t){t.style.transform="translate3d(0, 0, 0)";var n=t.dataset.speed||1,r=e.getVars(t,n),i=r.top,o=r.bottom,a=r.offset,u=Object(s.g)("[data-rotate]",t),l=t.parentNode.closest("[data-smooth-item]");l&&e.sections.some((function(e){e.el===l&&(l=e)})),e.sections.push({el:t,parent:l,rotate:u,top:i,bottom:o,offset:a,speed:n,out:!0,transform:0})})))}},{key:"resize",value:function(){var e=this;this.sections&&(this.sections.forEach((function(t){t.el.style.transform="translate3d(0, 0, 0)";var n=e.getVars(t.el,t.speed),r=n.top,i=n.bottom,o=n.offset;Object.assign(t,{top:r,bottom:i,offset:o})})),this.transformSections())}},{key:"on",value:function(){r.a.on("tick",this.run),r.a.on("resize",this.resize)}},{key:"off",value:function(){r.a.off("tick",this.run),r.a.off("resize",this.resize)}}])&&u(t.prototype,n),i&&u(t,i),e}()),c=n("O0I/"),f=n("O2cr");function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"run",(function(e){var t=e.current;n.state.current=t,n.animateElems()})),p(this,"onResize",(function(){n.state.isResizing=!0,n.state.isResizing=!1})),this.elems=t,this.stickies=null,this.state={isResizing:!1},this.init()}var t,n,i;return t=e,(n=[{key:"animateElems",value:function(){for(var e=0;e<this.stickies.length;e++){var t=this.stickies[e],n=t.el,r=t.top,i=t.bottom,o=t.height,s=t.tl;if(this.isVisible(r,i).isVisible){var u=this.state.current-r,l=Math.min(Math.max(u,0),o-a.a.bounds.wh),c=l/(o-a.a.bounds.wh);s&&s.progress(c),a.a.flags.smooth&&(n.style.transform="translate3d(0, ".concat(l,"px, 0)"))}}}},{key:"isVisible",value:function(e,t){var n=this.state.current,r=e-n,i=t-n,o=r<a.a.bounds.wh&&i>0;return{isVisible:o,start:r,end:i}}},{key:"getStickies",value:function(){var e=this;this.stickies=[],document.querySelectorAll("[data-stick]").forEach((function(t){var n=t.closest("[data-stick-parent]").getBoundingClientRect(),r=n.top,i=n.bottom,o=n.height,a=f.a.timeline({paused:!0,defaults:{ease:"linear",duration:1}}).fromTo(".js-values-slide",{yPercent:0},{yPercent:-100,stagger:1}).fromTo(".js-values-img",{yPercent:0},{yPercent:100,stagger:1},0);e.stickies.push({el:t,top:r,bottom:i,height:o,tl:a})}))}},{key:"addEvents",value:function(){r.a.on("tick",this.run),r.a.on("resize",this.onResize)}},{key:"removeEvents",value:function(){r.a.off("tick",this.run),r.a.off("resize",this.onResize)}},{key:"destroy",value:function(){this.removeEvents(),this.stickies=null,this.elems=null,this.state=null}},{key:"init",value:function(){this.getStickies(),this.addEvents()}}])&&h(t.prototype,n),i&&h(t,i),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"onIn",(function(){n.input.parentNode.classList.add("is-active")})),m(this,"onOut",(function(){0===n.input.value.length&&n.input.parentNode.classList.remove("is-active")})),this.el=t,this.input=this.el.querySelector(".js-signup-input"),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.on()}},{key:"destroy",value:function(){this.off(),this.input=null}},{key:"on",value:function(){Object(s.e)(this.input,"a","focus",this.onIn),Object(s.e)(this.input,"a","blur",this.onOut)}},{key:"off",value:function(){Object(s.e)(this.input,"r","focus",this.onIn),Object(s.e)(this.input,"r","blur",this.onOut)}}])&&v(t.prototype,n),r&&v(t,r),e}(),g=n("3jgs"),b=n.n(g);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}f.a.registerPlugin(b.a);var w=function(){function e(t){var n,r,i,o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(){o.setBounds(),o.childResize()},(r="resize")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,Object(s.b)(this,"run","onDown","onMove","onUp"),this.el=t,this.opts=Object.assign({speed:1.5,touchMultiplier:a.a.isDevice?2:1,threshold:50,ease:.09},u),this.ui={area:this.el.closest(".js-draggable-area"),items:Object(s.h)(".js-draggable-item",this.el)},this.state={target:0,current:{a:0,aRounded:0},ease:{a:this.opts.ease},y:0,on:{x:0,y:0},off:0,progress:0,max:0,min:0,snap:{points:null},flags:{dragging:!1}},this.items=null,this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){return f.a.utils.pipe(this.setup(),this.on())}},{key:"destroy",value:function(){this.off(),this.state=null,this.items=null,this.opts=null,this.ui=null}},{key:"on",value:function(){r.a.on("mousedown",this.onDown),r.a.on("mousemove",this.onMove),r.a.on("mouseup",this.onUp),r.a.on("tick",this.run),r.a.on("resize",this.resize)}},{key:"off",value:function(){r.a.off("mousedown",this.onDown),r.a.off("mousemove",this.onMove),r.a.off("mouseup",this.onUp),r.a.off("tick",this.run),r.a.off("resize",this.resize)}},{key:"setup",value:function(){this.setBounds(),this.ui.area.style.touchAction="pan-y"}},{key:"setBounds",value:function(){var e=this.state,t=this.ui.items,n=this.el.getBoundingClientRect(),r=n.width,i=n.left;e.snap.points=null,e.snap.points=[],this.items=null,this.items=[];for(var o=0;o<t.length;o++){var s=t[o];s.style.transform="translate3d(0, 0, 0)";var u=s.dataset.ease,l=s.getBoundingClientRect(),c=l.left,f=l.right,h=l.width;e.snap.points.push(-(c-i)),this.items.push({el:s,left:c,right:f,width:h,ease:a.a.isPhone?"a":u||"a",out:!1})}e.max=-(this.items[this.items.length-1].right-r-i),e.min=0}},{key:"calc",value:function(){var e=this.state;e.current.a+=(e.target-e.current.a)*e.ease.a,e.current.aRounded=Math.round(100*e.current.a)/100,e.progress=e.current.aRounded/e.max,this.tl&&this.tl.progress(e.progress)}},{key:"run",value:function(){this.calc(),this.transformItems()}},{key:"transformItems",value:function(){for(var e=this.state,t=e.current,n=e.y,r=0;r<this.items.length;r++){var i=this.items[r],o=t[i.ease+"Rounded"],s=this.isVisible(i,o),u=s.isVisible,l=s.progress;if(!i.out){var c="\n        translate3d(".concat(o,"px, ").concat(r%2?n:-n,"px, 0) \n        rotate(0.001deg)\n        ");i.el.style.transform=c,i.tl&&i.tl.progress(l)}u||a.a.flags.resize?i.out=!1:i.out||(i.out=!0)}}},{key:"isVisible",value:function(e,t){var n=e.left,r=e.right,i=e.width,o=a.a.bounds.ww,s=this.opts.threshold,u=n+t<s+o&&r+t>-s;return{isVisible:u,progress:f.a.utils.clamp(0,1,1-(t+n+i)/(o+i))}}},{key:"clampTarget",value:function(){var e=this.state;e.target=f.a.utils.clamp(e.max,0,e.target)}},{key:"onDown",value:function(e){var t=e.x,n=e.y,r=e.target;if(this.ui.area.contains(r)){var i=this.state,o=i.flags,a=i.on;o.dragging=!0,this.el.style.pointerEvents="none",a.x=t,a.y=n}}},{key:"onUp",value:function(){var e=this.state;e.flags.dragging=!1,this.el.style.pointerEvents="auto",this.opts.snap&&this.snap(),e.off=e.target}},{key:"snap",value:function(){this.opts.snap&&(this.state.target=f.a.utils.snap(this.state.snap.points,this.state.target))}},{key:"onMove",value:function(e){var t=e.x,n=e.y,r=e.e,i=this.state;if(i.flags.dragging){var o=i.off,a=i.on,s=t-a.x,u=n-a.y;Math.abs(s)>Math.abs(u)&&r.cancelable&&(r.preventDefault(),r.stopPropagation()),i.target=o+s*(this.opts.speed*this.opts.touchMultiplier),this.clampTarget()}}},{key:"childResize",value:function(){}}])&&D(t.prototype,n),i&&D(t,i),e}();function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(s.b)(this,"onMove","run"),this.el=Object(s.g)(".js-projects"),this.ui={titles:Object(s.g)(".js-projects-titles"),projects:x(Object(s.h)(".js-project")),assets:Object(s.h)(".js-project-asset"),mask:Object(s.g)(".js-projects-mask"),duplicate:Object(s.g)(".js-projects-duplicate")},this.state={target:0,current:0,mouse:{target:0,current:0,offset:0},min:0,max:0,scale:0,offset:0,bounds:0,snap:[],image:{current:0,last:0},hover:!1},this.cache=[],this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.getCache(),this.setup(),this.on()}},{key:"destroy",value:function(){this.off(),this.cache=null,this.state=null,this.ui=null,a.a.flags.locked=!1}},{key:"on",value:function(){r.a.on("tick",this.run),!a.a.isDevice&&r.a.on("mousemove",this.onMove)}},{key:"off",value:function(){r.a.off("tick",this.run),!a.a.isDevice&&r.a.off("mousemove",this.onMove)}},{key:"setup",value:function(){!a.a.isDevice&&(a.a.flags.locked=!0);var e=this.state,t=e.mouse,n=e.snap,r=this.ui,i=r.titles,o=r.mask,s=r.projects;e.bounds=i.getBoundingClientRect();var u=a.a.bounds.wh-e.bounds.top;e.max=e.bounds.bottom-a.a.bounds.wh,e.scale=e.max/u<0?0:e.max/u;for(var l=0;l<s.length;l++){var c=s[l].getBoundingClientRect(),h=c.height,p=c.top+h/2;n.push(p),0===l&&(t.offset=p,e.offset=h/2,f.a.set(o,{height:h}))}}},{key:"run",value:function(e){var t=e.current,n=this.state,r=this.ui,i=r.titles,o=r.mask,s=r.duplicate;if(n.current+=.085*(n.target-n.current),a.a.isDevice)this.toggleImage(t),i.style.transform="translate3d(0, ".concat(-t,"px, 0)"),s.style.transform="translate3d(0, ".concat(-t,"px, 0)");else{var u=n.current*n.scale,l=n.current-n.offset,c=-(u+n.current-n.offset);i.style.transform="translate3d(0, ".concat(-u,"px, 0)"),o.style.transform="translate3d(0, ".concat(l,"px, 0)"),s.style.transform="translate3d(0, ".concat(c,"px, 0)")}}},{key:"onMove",value:function(e){var t=e.y,n=e.target,r=this.state;n.closest(".js-projects-titles")&&(r.target=t-r.bounds.top)}},{key:"toggleImage",value:function(e){var t=this.state;t.image.last=t.image.current,t.image.current=t.snap.indexOf(f.a.utils.snap(t.snap,e+t.min)),t.image.current!==t.image.last&&(this.ui.assets[t.image.last].style.opacity=0,this.ui.assets[t.image.current].style.opacity=1)}},{key:"getCache",value:function(){for(var e=this.ui.projects,t=0;t<e.length;t++){var n=e[t];this.cache.push({i:t,el:n})}}}])&&E(t.prototype,n),i&&E(t,i),e}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e,t,n){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,T(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(r=[{key:"setup",value:function(){F(T(t.prototype),"setup",this).call(this),this.circle=f.a.timeline({paused:!0}).fromTo(".js-draggable-progress",{drawSVG:0},{drawSVG:"100%",duration:1,ease:"linear"})}},{key:"calc",value:function(){F(T(t.prototype),"calc",this).call(this),this.state.y=35*Math.sin((this.state.current.aRounded+350)/350),this.circle&&this.circle.progress(this.state.progress)}}])&&C(n.prototype,r),i&&C(n,i),t}(w);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e,t,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,L(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,e),n=t,(r=[{key:"setup",value:function(){M(L(t.prototype),"setup",this).call(this),this.createTl()}},{key:"createTl",value:function(){this.tl&&this.tl.kill(),Object(s.g)(".js-img-slider-pag")&&(this.tl=f.a.timeline({paused:!0}).fromTo(".js-img-slider-pag",{yPercent:0},{yPercent:-(100-100/this.items.length),duration:1,ease:"linear"}));for(var e=0;e<this.items.length;e++){var t=this.items[e],n=Object(s.g)(".js-slide-content",t.el),r=Object(s.g)(".js-slide-img",n);t.tl&&t.tl.kill(),t.tl=f.a.timeline({paused:!0,defaults:{duration:1,ease:"linear"}}).fromTo(n,{scale:.25,alpha:.1,xPercent:-20,yPercent:37.5},{scale:1,alpha:.999,xPercent:0,yPercent:0}).to(n,{scale:.25,alpha:.1,xPercent:20,yPercent:-37.5}).fromTo(r,{xPercent:-20},{xPercent:20,duration:2},0)}}},{key:"childResize",value:function(){M(L(t.prototype),"childResize",this).call(this),this.createTl()}}])&&A(n.prototype,r),i&&A(n,i),t}(w);n("cuco");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e,t,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=G(this,V(t).call(this,e)),Object.assign(n.state.current,{b:0,bRounded:0,c:0,cRounded:0}),Object.assign(n.state.ease,{b:n.opts.ease-.0075,c:n.opts.ease-.015}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(r=[{key:"setup",value:function(){N(V(t.prototype),"setup",this).call(this),this.circle=f.a.timeline({paused:!0}).fromTo(".js-draggable-progress",{drawSVG:0},{drawSVG:"100%",duration:1,ease:"linear"})}},{key:"calc",value:function(){N(V(t.prototype),"calc",this).call(this);var e=this.state,n=e.current,r=e.target,i=e.ease,o=e.progress;n.b+=(r-n.b)*i.b,n.bRounded=Math.round(100*n.b)/100,n.c+=(r-n.c)*i.c,n.cRounded=Math.round(100*n.c)/100,!a.a.isDevice&&this.circle&&this.circle.progress(o)}}])&&U(n.prototype,r),i&&U(n,i),t}(w),Y=n("E/ZA"),q=n.n(Y);function K(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,"ui",{}),Z(this,"handleBrandClick",(function(e){var n=e.currentTarget,r=t.ui,i=r.brands,o=r.children,s=r.overlay,u=o[i.indexOf(n)];t.removeActiveClassFromBrands(),n.classList.add("is-active"),u.classList.add("is-active"),a.a.flags.locked=!0,s.scrollTop=0,t.isOpen||(t.isOpen=!0,t.openBrandIndex=i.indexOf(n),t.tl&&t.tl.kill(),t.tl=f.a.timeline().to(s,{yPercent:0,duration:.75,ease:"expo.inOut"}))})),Z(this,"handleChildClick",(function(e){var n=e.currentTarget,r=t.ui,i=r.brands,o=r.children[t.openBrandIndex].querySelectorAll('input[type="checkbox"]:checked').length;e.stopPropagation(),o>0?i[t.openBrandIndex].classList.add("has-count"):i[t.openBrandIndex].classList.remove("has-count"),i[t.openBrandIndex].querySelector(".js-brand-selected").innerHTML=o,t.chosen.has(n)?(n.parentNode.classList.remove("is-active"),t.chosen.delete(n)):(n.parentNode.classList.add("is-active"),t.chosen.add(n)),Object(s.h)(".js-press-selected").forEach((function(e){return e.innerText="".concat(t.chosen.size," selected")}))})),Z(this,"handleToggleClick",(function(e){for(var t=e.currentTarget.parentNode.querySelectorAll(".js-press-selectable"),n=e.currentTarget.parentNode.querySelectorAll(".js-press-selectable.is-active"),r=0;r<t.length;r++)n.length<t.length&&t[r].classList.contains("is-active")||t[r].querySelector("input").click()})),Z(this,"handleSearch",(function(){for(var e=t.ui,n=e.search,i=e.brands,o=i.filter((function(e){return e.dataset.brand.includes(n.value)})),a=0;a<i.length;a++)i[a].hidden=-1===o.indexOf(i[a]);r.c.onResize()})),Z(this,"handleLocationClick",(function(e){for(var n=t.ui,i=n.locations,o=n.brands,a=e.currentTarget,s=a.value,u=o.filter((function(e){return e.dataset.location.includes(s)})),l=0;l<i.length;l++)a!==i[l]?i[l].classList.add("btn-round--b0"):i[l].classList.remove("btn-round--b0");for(var c=0;c<o.length;c++)-1!==u.indexOf(o[c])?o[c].classList.remove("is-hidden"):o[c].classList.add("is-hidden");r.c.onResize()})),Z(this,"closeOverlay",(function(){a.a.flags.locked=!1,t.isOpen=!1,t.removeActiveClassFromBrands(),t.tl&&t.tl.kill(),t.tl=f.a.timeline().to(t.ui.overlay,{yPercent:100,duration:.75,ease:"expo.inOut"})})),this.ui.brands=K(Object(s.h)(".js-press-brand")),this.ui.children=K(Object(s.h)(".js-press-children")),this.ui.overlay=Object(s.g)(".js-press-overlay"),this.ui.search=Object(s.g)(".js-press-search"),this.ui.locations=Object(s.h)(".js-location-toggle"),this.chosen=new Set,this.lazyLoad=new $(Object(s.h)("img",this.ui.overlay)),this.tl=null,this.isOpen=!1,this.searchCallback=q()(this.handleSearch,100),f.a.set(".js-press-overlay",{yPercent:100}),this.addEvents()}var t,n,i;return t=e,(n=[{key:"addEvents",value:function(){r.a.on("click",this.ui.brands,this.handleBrandClick),r.a.on("click",".js-press-child",this.handleChildClick),r.a.on("click",".js-press-close",this.closeOverlay),r.a.on("click",".js-press-toggle",this.handleToggleClick),r.a.on("click",this.ui.locations,this.handleLocationClick),r.a.on("input",this.ui.search,this.searchCallback)}},{key:"removeActiveClassFromBrands",value:function(){for(var e=this.ui,t=e.brands,n=e.children,r=0;r<this.ui.brands.length;r++)t[r].classList.remove("is-active"),n[r].classList.remove("is-active")}},{key:"destroy",value:function(){r.a.off("click",this.ui.brands,this.handleBrandClick),r.a.off("click",".js-press-child",this.handleChildClick),r.a.off("click",".js-press-close",this.closeOverlay),r.a.off("click",".js-press-toggle",this.handleToggleClick),r.a.off("click",this.ui.locations,this.handleLocationClick),r.a.off("input",this.ui.search,this.searchCallback),this.lazyLoad.destroy()}}])&&W(t.prototype,n),i&&W(t,i),e}();function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){var n,r,i,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(e){e.forEach((function(e){e.intersectionRatio>0&&(o.load(e.target),o.observer.unobserve(e.target))}))},(r="handle")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.images=t,this.observer=new IntersectionObserver(this.handle,{root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,0]}),this.init()}var t,n,r;return t=e,(n=[{key:"observe",value:function(){var e=this;this.images.forEach((function(t){return e.observer.observe(t)}))}},{key:"load",value:function(e){var t=e.dataset.lazySrc;Object(s.c)(t).then((function(){e.src=t,e.classList.add("is-loaded")}))}},{key:"destroy",value:function(){this.observer.disconnect(),this.observer=null,this.images=null}},{key:"init",value:function(){this.observe()}}])&&Q(t.prototype,n),r&&Q(t,r),e}();n("XORh");function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),te(this,"ui",{}),te(this,"toggle",(function(){var e=t.state,n=t.ui.titles;e.last=e.current,e.current=1===e.current?0:1,n[e.last].classList.remove("is-active"),n[e.current].classList.add("is-active"),t.animate()})),this.el=Object(s.g)(".js-studios"),this.ui.studios=Object(s.h)(".js-studio",this.el),this.ui.titles=Object(s.h)(".js-studio-title",this.el),this.ui.imagesOuter=Object(s.h)(".js-studio-img-outer",this.el),this.ui.imagesInner=Object(s.h)(".js-studio-img-inner",this.el),this.state={current:0,last:1},this.studios=[],this.tl=null,this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.addEvents(),this.getCache(),this.setInitial()}},{key:"addEvents",value:function(){r.a.on("click",".js-toggle-studios",this.toggle)}},{key:"getCache",value:function(){var e=this;this.ui.studios.forEach((function(t){e.studios.push({el:t,outline:Object(s.g)(".js-studio-pin__outline",t),bg:Object(s.g)(".js-studio-pin__bg",t)})}))}},{key:"setInitial",value:function(){var e=this.studios[1];f.a.set(e.el,{alpha:.25}),f.a.set(e.bg,{scale:0})}},{key:"animate",value:function(){var e=this.state,t=this.studios[e.current],n=this.studios[e.last];this.tl&&this.tl.kill(),this.tl=f.a.timeline({defaults:{duration:.75,ease:"expo"}}).to(t.el,{alpha:1}).to(t.bg,{scale:1},0).to(t.outline,{alpha:0,scale:1.5},0).to(n.el,{alpha:.25},0).to(n.bg,{scale:0},0).to(n.outline,{scale:1,alpha:1},0).to(".js-studios__line",{xPercent:1===e.current?100:0},0),a.a.flags.smooth||this.tl.to(".js-studio-image-".concat(e.current),{alpha:1,duration:.5,ease:"power1"},0).to(".js-studio-image-".concat(e.last),{alpha:0,duration:.5,ease:"power1"},0)}},{key:"removeEvents",value:function(){r.a.off("click",".js-toggle-studios",this.toggle)}},{key:"destroy",value:function(){this.removeEvents(),this.ui=null,this.state=null,this.studios=null,this.tl&&this.tl.kill()}}])&&ee(t.prototype,n),i&&ee(t,i),e}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e,t,n){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=se(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,se(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),n=t,(r=[{key:"setup",value:function(){ae(se(t.prototype),"setup",this).call(this),this.tl=f.a.timeline({paused:!0}).fromTo(".js-approach-pagination",{yPercent:0},{yPercent:-(100-100/6),duration:1,ease:"linear"})}}])&&ie(n.prototype,r),i&&ie(n,i),t}(w),ce=n("XaR8");function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var he=new(function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){var e=a.a.dom,t=a.a.page,n=a.a.color;"project"!==t.current&&(e.doc.style.setProperty("--brand-color",n.pink),ce.a.setColor(n.blue),n.default=!0)},(n="resetBrandColor")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.addEvents()}var t,n,i;return t=e,(n=[{key:"setBrandColor",value:function(e){a.a.color.default=!1,a.a.dom.doc.style.setProperty("--brand-color",e),ce.a.setColor(e)}},{key:"addEvents",value:function(){var e=this;a.a.isDevice||(r.a.delegate("mouseenter","[data-color]",(function(t){var n=t.delegatedTarget;e.setBrandColor(n.dataset.color)})),r.a.delegate("mouseleave","[data-color]",(function(){"projects"!==a.a.page.current&&e.resetBrandColor()})))}}])&&fe(t.prototype,n),i&&fe(t,i),e}()),pe=n("6wCR"),de=n.n(pe);n("LNcM");function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var me=new(function(){function e(){var t,n,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){for(var t=function(t){var n=e[t];if(n.isIntersecting){var r=i.cache.find((function(e){return e.el===n.target}));r.intersecting=!0,r.tl.play(),i.observer.unobserve(n.target)}},n=0;n<e.length;n++)t(n)},(n="handle")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.el=a.a.dom.body,this.cache=null,this.observer=new IntersectionObserver(this.handle,{root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,0]})}var t,n,r;return t=e,(n=[{key:"update",value:function(e){this.getElems(e),this.observe()}},{key:"getElems",value:function(e){var t=this;this.cache=null,this.cache=[];var n=Object(s.h)("[data-scroll]",e);n&&n.forEach((function(e){e.getBoundingClientRect().top<a.a.bounds.wh||t.cache.push({el:e,intersecting:!1,tl:t.getTimelines(e,e.dataset.scroll)})}))}},{key:"getTimelines",value:function(e,t){var n=f.a.timeline({paused:!0,immediateRender:!0});if("chars"===t){var r=new de.a(e,{type:"words, chars",charsClass:"char"});n.fromTo(r.chars,{yPercent:75,rotationX:75,alpha:0},{yPercent:0,rotationX:0,alpha:1,stagger:.075,duration:2.75,ease:"expo"},0)}return n.progress(1).progress(0),n}},{key:"observe",value:function(){var e=this;this.cache.forEach((function(t){return e.observer.observe(t.el)}))}},{key:"clean",value:function(){var e=this;this.cache.forEach((function(t){return e.observer.unobserve(t.el)}))}},{key:"destroy",value:function(){this.observer.disconnect(),this.observer=null,this.cache=null}}])&&ve(t.prototype,n),r&&ve(t,r),e}()),ye=n("2O49");n.d(t,"a",(function(){return o})),n.d(t,"o",(function(){return l})),n.d(t,"e",(function(){return c.a})),n.d(t,"k",(function(){return d})),n.d(t,"i",(function(){return y})),n.d(t,"m",(function(){return O})),n.d(t,"p",(function(){return j})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return X})),n.d(t,"l",(function(){return J})),n.d(t,"h",(function(){return $})),n.d(t,"j",(function(){return ne})),n.d(t,"b",(function(){return le})),n.d(t,"d",(function(){return he})),n.d(t,"n",(function(){return me})),n.d(t,"c",(function(){return ye.a}))}});